character_event = {
	id = 110000
	picture = "GFX_evt_council"	
	
	hide_from = yes
	
	trigger = {
		ai = no
		NOT = { has_landed_title = e_mexikha }
		NOT = { has_landed_title = e_golden_horde }
		NOT = { has_landed_title = e_il-khanate }
		NOT = { has_landed_title = e_timurids }		
		OR = {
			check_variable = { which = "mercenaries_raised" value = 0.1 }
			check_variable = { which = "loan_amount" value = 0.1 }
		}
	}
		
	desc = "EVTDESC110000"
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = { disband_event_forces = yes }
	
	option = {
		name = "EVTOPTA110000"
		set_variable = { which = "mercenaries_raised" value = 0 }
		set_variable = { which = "loan_amount" value = 0 }
		hidden_tooltip = { remove_character_modifier = loan_timer }
	}
}

character_event = {
	id = 110001
	picture = "GFX_evt_council"	
	
	is_triggered_only = yes
	only_rulers = yes
	
	trigger = {
		primary_title = { tier = EMPEROR }
		any_demesne_title = {
			tier = KING
			empire = { holder_scope = { character = ROOT } }
			OR = {
				AND = {
					empire = { has_law = investiture_law_0 }
					NOT = { has_law = investiture_law_0 }
				}
				AND = {
					empire = { has_law = investiture_law_1 }
					NOT = { has_law = investiture_law_1 }
				}			
				AND = {
					empire = { has_law = centralization_0 }
					NOT = { has_law = centralization_0 }
				}
				AND = {
					empire = { has_law = centralization_1 }
					NOT = { has_law = centralization_1 }
				}	
				AND = {
					empire = { has_law = centralization_2 }
					NOT = { has_law = centralization_2 }
				}
				AND = {
					empire = { has_law = centralization_3 }
					NOT = { has_law = centralization_3 }
				}	
				AND = {
					empire = { has_law = centralization_4 }
					NOT = { has_law = centralization_4 }
				}				
			}
		}
	}
		
	desc = "EVTDESC110001"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "EVTOPTA110001"	
		set_character_flag = centralize_without_penalties
		any_demesne_title = {
			limit = {
				tier = KING
				empire = { holder_scope = { character = ROOT } }
				OR = {
					AND = {
						empire = { has_law = investiture_law_0 }
						NOT = { has_law = investiture_law_0 }
					}
					AND = {
						empire = { has_law = investiture_law_1 }
						NOT = { has_law = investiture_law_1 }
					}				
					AND = {
						empire = { has_law = centralization_0 }
						NOT = { has_law = centralization_0 }
					}
					AND = {
						empire = { has_law = centralization_1 }
						NOT = { has_law = centralization_1 }
					}	
					AND = {
						empire = { has_law = centralization_2 }
						NOT = { has_law = centralization_2 }
					}
					AND = {
						empire = { has_law = centralization_3 }
						NOT = { has_law = centralization_3 }
					}	
					AND = {
						empire = { has_law = centralization_4 }
						NOT = { has_law = centralization_4 }
					}					
				}			
			}
			if = {
				limit = {
					empire = { has_law = centralization_0 }
				}
				add_law = centralization_0
			}
			if = {
				limit = {
					empire = { has_law = centralization_1 }
				}
				add_law = centralization_1
			}
			if = {
				limit = {
					empire = { has_law = centralization_2 }
				}
				add_law = centralization_2
			}
			if = {
				limit = {
					empire = { has_law = centralization_3 }
				}
				add_law = centralization_3
			}
			if = {
				limit = {
					empire = { has_law = centralization_4 }
				}
				add_law = centralization_4
			}
			if = {
				limit = {
					empire = { has_law = investiture_law_0 }
				}
				add_law = investiture_law_0
			}
			if = {
				limit = {
					empire = { has_law = investiture_law_1 }
				}
				add_law = investiture_law_1
			}			
		}
		clr_character_flag = centralize_without_penalties
	}
}

character_event = {
	id = 110017
	
	trigger = {
		ai = yes
		primary_title = { higher_tier_than = DUKE }
		OR = {
			num_of_duke_titles = 4	
			AND = {
				NOT = { 
					any_demesne_title = {
						tier = duke
						is_titular = yes
					}
				}
				num_of_duke_titles = 3
			}
			AND = {
				primary_title = { has_law = succ_feudal_elective }
				num_of_duke_titles = 2
			}
			any_demesne_title = {
				tier = duke
				NOT = {
					ROOT = {
						any_demesne_title = {
							tier = count
							duchy = { title = PREVPREVPREV }
						}
					}
				}
			}
		}
		OR = {	
			any_realm_lord = {
				religion = ROOT
				is_liege_or_above = ROOT			
				any_demesne_title = {
					tier = COUNT					
					location = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}	
					}
				}				
			}
			any_demesne_title = {
				tier = COUNT
				location = {
					duchy = {
						NOT = { title = d_sunni }
						NOT = { title = d_shiite }
						holder_scope = { character = ROOT }
						NOT = {
							ROOT = {
								capital_scope = {
									duchy = { title = PREVPREVPREV }
								}									
							}
						}
					}
				}
			}			
		}
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		hidden_tooltip = {		
			#give away duchies we control no dejure land in first
			#try to give it to a count with their capital in the duchy
			#give it to lords with good relationship + same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {					
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			#give it to lords with good relationship + same culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			#give to lords with which we have a decent relationship
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			#try to give it to a count who has a province in the duchy
			#same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			#same culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			#by relation
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			#if we have a large demesne, try to give it to a randomly generated character along with a count title in the duchy that we hold
			random_demesne_title = {
				limit = {
					tier = COUNT
					ROOT = { NOT = { demesne_efficiency = 1.5 } }
					NOT = { has_global_flag = duchy_granted }
					location = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}	
					}
				}	
				ROOT = {
					create_random_steward = {
						random_traits = yes
						dynasty = random
						female = no
					}
					new_character = {					
						ROOT = {
							random_demesne_title = {
								limit = {
									tier = COUNT
									location = {
										duchy = {
											NOT = { title = d_sunni }
											NOT = { title = d_shiite }						
											holder_scope = { character = ROOT }
											NOT = {
												ROOT = {
													any_demesne_title = {
											tier = count
														duchy = { title = PREVPREVPREV }
													}									
												}
											}
										}
									}
								}
								location = {
									set_province_flag = this_duchy
								}
							}
							random_demesne_province = {
								limit = {
									has_province_flag = this_duchy
								}
								county = {
									grant_title = PREVPREVPREV
								}
								duchy = {
									grant_title = PREVPREVPREV
								}
								clr_province_flag = this_duchy
							}
						}
						set_defacto_liege = ROOT
					}
				}
				set_global_flag = duchy_granted
			}
			#give it to anyone with their capital in the duchy
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			#anyone with a province in the duchy
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			#if we have at least half our demesne size in provinces, try to give it to a randomly generated character along with a count title in the duchy that we hold
			random_demesne_title = {
				limit = {
					tier = COUNT
					ROOT = { NOT = { demesne_efficiency = 2.0 } }
					NOT = { has_global_flag = duchy_granted }
					location = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}	
					}
				}	
				ROOT = {
					create_random_steward = {
						random_traits = yes
						dynasty = random
						female = no
					}
					new_character = {					
						ROOT = {
							random_demesne_title = {
								limit = {
									tier = COUNT
									location = {
										duchy = {
											NOT = { title = d_sunni }
											NOT = { title = d_shiite }						
											holder_scope = { character = ROOT }
											NOT = {
												ROOT = {
													any_demesne_title = {
											tier = count
														duchy = { title = PREVPREVPREV }
													}									
												}
											}
										}
									}
								}
								location = {
									set_province_flag = this_duchy
								}
							}
							random_demesne_province = {
								limit = {
									has_province_flag = this_duchy
								}
								county = {
									grant_title = PREVPREVPREV
								}
								duchy = {
									grant_title = PREVPREVPREV
								}
								clr_province_flag = this_duchy
							}
						}
						set_defacto_liege = ROOT
					}
				}
				set_global_flag = duchy_granted
			}						
			#if all else fails, give it to any vassal that has land in the duchy
			#same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}	
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			#culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}	
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			#by relation
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}	
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			#anyone
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					culture = ROOT
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					culture_group = ROOT
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										any_demesne_title = {
											tier = count
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}	
			#give it away to random character, regardless of demesne size
			random_demesne_title = {
				limit = {
					tier = COUNT
					NOT = { has_global_flag = duchy_granted }
					location = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									any_demesne_title = {
										tier = count
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}	
					}
				}	
				ROOT = {
					create_random_steward = {
						random_traits = yes
						dynasty = random
						female = no
					}
					new_character = {					
						ROOT = {
							random_demesne_title = {
								limit = {
									tier = COUNT
									location = {
										duchy = {
											NOT = { title = d_sunni }
											NOT = { title = d_shiite }						
											holder_scope = { character = ROOT }
											NOT = {
												ROOT = {
													any_demesne_title = {
														tier = count
														duchy = { title = PREVPREVPREV }
													}									
												}
											}
										}
									}
								}
								location = {
									set_province_flag = this_duchy
								}
							}
							random_demesne_province = {
								limit = {
									has_province_flag = this_duchy
								}
								county = {
									grant_title = PREVPREVPREV
								}
								duchy = {
									grant_title = PREVPREVPREV
								}
								clr_province_flag = this_duchy
							}
						}
						set_defacto_liege = ROOT
					}
				}				
				set_global_flag = duchy_granted
			}					
			#try to give it to a count with their capital in the duchy
			#give it to lords with good relationship + same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {					
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			#give it to lords with good relationship + same culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			#give to lords with which we have a decent relationship
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			#try to give it to a count who has a province in the duchy
			#same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			#same culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			#by relation
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			#if we have a large demesne, try to give it to a randomly generated character along with a count title in the duchy that we hold
			random_demesne_title = {
				limit = {
					tier = COUNT
					ROOT = { NOT = { demesne_efficiency = 1.5 } }
					NOT = { has_global_flag = duchy_granted }
					location = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}	
					}
				}	
				ROOT = {
					create_random_steward = {
						random_traits = yes
						dynasty = random
						female = no
					}
					new_character = {					
						ROOT = {
							random_demesne_title = {
								limit = {
									tier = COUNT
									location = {
										duchy = {
											NOT = { title = d_sunni }
											NOT = { title = d_shiite }						
											holder_scope = { character = ROOT }
											NOT = {
												ROOT = {
													capital_scope = {
														duchy = { title = PREVPREVPREV }
													}									
												}
											}
										}
									}
								}
								location = {
									set_province_flag = this_duchy
								}
							}
							random_demesne_province = {
								limit = {
									has_province_flag = this_duchy
								}
								county = {
									grant_title = PREVPREVPREV
								}
								duchy = {
									grant_title = PREVPREVPREV
								}
								clr_province_flag = this_duchy
							}
						}
						set_defacto_liege = ROOT
					}
				}
				set_global_flag = duchy_granted
			}
			#give it to anyone with their capital in the duchy
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			#anyone with a province in the duchy
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			#if we have at least half our demesne size in provinces, try to give it to a randomly generated character along with a count title in the duchy that we hold
			random_demesne_title = {
				limit = {
					tier = COUNT
					ROOT = { NOT = { demesne_efficiency = 2.0 } }
					NOT = { has_global_flag = duchy_granted }
					location = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}	
					}
				}	
				ROOT = {
					create_random_steward = {
						random_traits = yes
						dynasty = random
						female = no
					}
					new_character = {					
						ROOT = {
							random_demesne_title = {
								limit = {
									tier = COUNT
									location = {
										duchy = {
											NOT = { title = d_sunni }
											NOT = { title = d_shiite }						
											holder_scope = { character = ROOT }
											NOT = {
												ROOT = {
													capital_scope = {
														duchy = { title = PREVPREVPREV }
													}									
												}
											}
										}
									}
								}
								location = {
									set_province_flag = this_duchy
								}
							}
							random_demesne_province = {
								limit = {
									has_province_flag = this_duchy
								}
								county = {
									grant_title = PREVPREVPREV
								}
								duchy = {
									grant_title = PREVPREVPREV
								}
								clr_province_flag = this_duchy
							}
						}
						set_defacto_liege = ROOT
					}
				}
				set_global_flag = duchy_granted
			}						
			#if all else fails, give it to any vassal that has land in the duchy
			#same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}	
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			#culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}	
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			#by relation
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}	
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}
			#anyone
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					culture = ROOT
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					culture_group = ROOT
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								NOT = { title = d_sunni }
								NOT = { title = d_shiite }						
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = duchy_granted
			}	
			#give it away to random character, regardless of demesne size
			random_demesne_title = {
				limit = {
					tier = COUNT
					NOT = { has_global_flag = duchy_granted }
					location = {
						duchy = {
							NOT = { title = d_sunni }
							NOT = { title = d_shiite }						
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}	
					}
				}	
				ROOT = {
					create_random_steward = {
						random_traits = yes
						dynasty = random
						female = no
					}
					new_character = {					
						ROOT = {
							random_demesne_title = {
								limit = {
									tier = COUNT
									location = {
										duchy = {
											NOT = { title = d_sunni }
											NOT = { title = d_shiite }						
											holder_scope = { character = ROOT }
											NOT = {
												ROOT = {
													capital_scope = {
														duchy = { title = PREVPREVPREV }
													}									
												}
											}
										}
									}
								}
								location = {
									set_province_flag = this_duchy
								}
							}
							random_demesne_province = {
								limit = {
									has_province_flag = this_duchy
								}
								county = {
									grant_title = PREVPREVPREV
								}
								duchy = {
									grant_title = PREVPREVPREV
								}
								clr_province_flag = this_duchy
							}
						}
						set_defacto_liege = ROOT
					}
				}				
				set_global_flag = duchy_granted
			}			
			clr_global_flag = duchy_granted	
			character_event = { id = 110017 }
		}
	}
}

character_event = {
	id = 110018
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		ai = yes
		NOT = { has_character_flag = plot_check }			
		OR = {
			has_plot = plot_gain_liege_title
			has_plot = plot_gain_fellow_vassal_title
			has_plot = plot_weaken_fellow_vassal
			has_plot = plot_gain_vassal_title
			has_plot = plot_kidnap_liege
			has_plot = plot_kill_character
			has_plot = plot_discredit_councillor
			has_plot = plot_embezzle_from_liege
			has_plot = plot_kidnap_character
			has_plot = plot_instigate_revolt
			has_plot = plot_fabricate_treason
			has_plot = plot_fabricate_heresy
		}
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		set_character_flag = plot_check
		if = {
			limit = {
				NOT = { has_plot = plot_gain_vassal_title }
			}
			plot_target_char = { 
				any_courtier = {
					limit = { NOT = { is_plot_target_of = ROOT } }
					remove_opinion = {
						who = ROOT
						modifier = opinion_plot_help					
					}
					opinion = {
						who = ROOT
						modifier = opinion_plot_help
						years = 5
					}
				}
				any_vassal = {
					limit = { NOT = { is_plot_target_of = ROOT } }
					remove_opinion = {
						who = ROOT
						modifier = opinion_plot_help					
					}
					opinion = {
						who = ROOT
						modifier = opinion_plot_help
						years = 5
					}
				}
				liege = {			
					any_courtier = {
						limit = { NOT = { is_plot_target_of = ROOT } }
						remove_opinion = {
							who = ROOT
							modifier = opinion_plot_help					
						}
						opinion = {
							who = ROOT
							modifier = opinion_plot_help
							years = 5
						}
					}
					any_vassal = {
						limit = { NOT = { is_plot_target_of = ROOT } }
						remove_opinion = {
							who = ROOT
							modifier = opinion_plot_help					
						}
						opinion = {
							who = ROOT
							modifier = opinion_plot_help
							years = 5
						}
					}
				}				
			}
		}
	}
}

character_event = {
	id = 110019
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		ai = yes
		had_character_flag = {
			flag = plot_check
			days = 1825
		}
		OR = {
			NOT = { num_of_plot_backers = 1 }
			had_character_flag = {
				flag = plot_check
				days = 2750
			}				
		}
		OR = {
			NOT = { num_of_plot_backers = 2 }
			had_character_flag = {
				flag = plot_check
				days = 3650
			}				
		}
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		cancel_plot = yes
	}
}

character_event = {
	id = 110020
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		ai = yes
		prisoner = no
		age = 16	
		NOT = { trait = incapable }
		NOT = { has_character_flag = allow_plotting }
		NOT = {
			has_plot = plot_gain_liege_title
			has_plot = plot_gain_fellow_vassal_title
			has_plot = plot_weaken_fellow_vassal
			has_plot = plot_gain_vassal_title
			has_plot = plot_kidnap_liege
			has_plot = plot_kill_character
			has_plot = plot_discredit_councillor
			has_plot = plot_embezzle_from_liege
			has_plot = plot_kidnap_character
			has_plot = plot_instigate_revolt
			has_plot = plot_fabricate_treason
			has_plot = plot_fabricate_heresy
		}		
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			is_ruler = no
			NOT = {
				has_job_title = job_chancellor
				has_job_title = job_treasurer
				has_job_title = job_spymaster
				has_job_title = job_marshal
				has_job_title = job_spiritual
			}
		}		
		modifier = {
			factor = 0.5
			NOT = { intrigue = 5 }
		}
		modifier = {
			factor = 0.5
			NOT = { intrigue = 10 }
		}
		modifier = {
			factor = 2
			intrigue = 15
		}
		modifier = {
			factor = 2
			intrigue = 20
		}		
	}
	
	option = {
		name = "OK"
		set_character_flag = allow_plotting
	}
}

character_event = {
	id = 110026
	
	trigger = {
		is_ruler = yes
		any_demesne_title = {
			higher_tier_than = DUKE
			OR = {
				AND = {
					has_law = investiture_law_0
					ROOT = { NOT = { religion = catholic } }
				}
				AND = {
					has_law = investiture_law_1
					ROOT = { NOT = { religion = catholic } }
				}				
			}
		}
	}
		
	desc = "EVTDESC110024"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		any_demesne_title = {
			limit = {
				higher_tier_than = DUKE
			}	
			if = {
				limit = { 
					has_law = investiture_law_0
					ROOT = { NOT = { religion = catholic } }	
				}
				revoke_law = investiture_law_0
			}
			if = {
				limit = { 
					has_law = investiture_law_1
					ROOT = { NOT = { religion = catholic } }	
				}
				revoke_law = investiture_law_1
			}			
		}
	}
}

#AI kingdom creation event
character_event = {
	id = 110027
	
	trigger = {
		ai = yes
		war = no
		is_ruler = yes
		independent = yes
		wealth = 250
		NOT = { check_variable = { which = "loan_amount" value = 49.5 } }
		NOT = {
			primary_title = { has_law = succ_feudal_elective }
		}
		OR = {
			tier = king
			AND = {
				is_feudal = no
				num_of_duke_titles = 3
			}
		}
		OR = {
			NOT = { has_character_flag = kingdom_creation_check }
			had_character_flag = {
				flag = kingdom_creation_check
				days = 1825
			}
		}
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		months = 1
	}
	
	option = {
		name = "OK"
		clr_character_flag = kingdom_creation_check
		set_character_flag = kingdom_creation_check
		
		#!!!#
		#stuff for titular kingdoms goes here
		#!!!#
		
		#de jure kingdoms
		hidden_tooltip = {
			set_character_flag = centralize_without_penalties	
			any_realm_lord = {
				limit = { 
					NOT = { has_global_flag = title_created }
				}
				any_demesne_title = {
					limit = { 
						NOT = { has_global_flag = title_created }
						kingdom = {
							OR = {
								AND = {
									has_holder = no
									NOT = { empire = { holder_scope = { character = ROOT } } }
								}
								AND = {
									has_holder = yes
									holder_scope = { 
										NOT = { character = ROOT }
										NOT = { same_realm = ROOT } 
										war = no
									}
								}
							}
						}
						tier = count
						location = { NOT = { has_province_flag = province_counted } }
					}
					kingdom = {
						ROOT = {
							any_demesne_title = {
								limit = {
									tier = count
									kingdom = {
										title = PREVPREVPREV
									}
									location = { NOT = { has_province_flag = province_counted } }
								}
								ROOT = { change_variable = { which = "kingdom_provinces" value = 1 } }
								location = { set_province_flag = province_counted }
							}					
						}			
						any_playable_ruler = {
							limit = {
								top_liege = { character = ROOT }	
							}
							any_demesne_title = {
								limit = {
									tier = count
									kingdom = {
										title = PREVPREVPREV
									}
									location = { NOT = { has_province_flag = province_counted } }
								}
								ROOT = { change_variable = { which = "kingdom_provinces" value = 1 } }
								location = { set_province_flag = province_counted }
							}					
						}
						any_playable_ruler = {
							limit = {
								NOT = { top_liege = { character = ROOT } }	
							}
							any_demesne_title = {
								limit = {
									tier = count
									kingdom = {
										title = PREVPREVPREV
									}
									location = { NOT = { has_province_flag = province_counted } }
								}
								ROOT = { change_variable = { which = "kingdom_provinces" value = -1 } }
								location = { set_province_flag = province_counted }
							}					
						}
						if = {
							limit = {
								ROOT = { check_variable = { which = "kingdom_provinces" value = 0.9 } }
								has_holder = no
								NOT = { has_global_flag = title_created }
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = investiture_law_0 }
									}
								}
								add_law = investiture_law_0
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = investiture_law_1 }
									}
								}
								add_law = investiture_law_1
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = succ_gavelkind }
									}
								}
								ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
								add_law = succ_gavelkind
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = succ_seniority }
									}
								}
								ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
								add_law = succ_seniority
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = succ_primogeniture }
									}
								}
								ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
								add_law = succ_primogeniture
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = succ_feudal_elective }
									}
								}
								ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
								add_law = succ_feudal_elective
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = succ_turkish_succession }
									}
								}
								ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
								add_law = succ_turkish_succession
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = succ_open_elective }
									}
								}
								ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
								add_law = succ_open_elective
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = succ_catholic_bishopric }
									}
								}
								ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
								add_law = succ_catholic_bishopric
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = cognatic_succession }
									}
								}
								ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
								add_law = cognatic_succession
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = agnatic_succession }
									}
								}
								ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
								add_law = agnatic_succession
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = true_cognatic_succession }
									}
								}
								ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
								add_law = true_cognatic_succession
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = feudal_tax_0 }
									}
								}
								add_law = feudal_tax_0
							}	
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = feudal_tax_1 }
									}
								}
								add_law = feudal_tax_1
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = feudal_tax_2 }
									}
								}
								add_law = feudal_tax_2
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = feudal_tax_3 }
									}
								}
								add_law = feudal_tax_3
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = feudal_tax_4 }
									}
								}
								add_law = feudal_tax_4
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = feudal_contract_0 }
									}
								}
								add_law = feudal_contract_0
							}	
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = feudal_contract_1 }
									}
								}
								add_law = feudal_contract_1
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = feudal_contract_2 }
									}
								}
								add_law = feudal_contract_2
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = feudal_contract_3 }
									}
								}
								add_law = feudal_contract_3
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = feudal_contract_4 }
									}
								}
								add_law = feudal_contract_4
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = iqta_tax_0 }
									}
								}
								add_law = iqta_tax_0
							}	
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = iqta_tax_1 }
									}
								}
								add_law = iqta_tax_1
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = iqta_tax_2 }
									}
								}
								add_law = iqta_tax_2
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = iqta_tax_3 }
									}
								}
								add_law = iqta_tax_3
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = iqta_tax_4 }
									}
								}
								add_law = iqta_tax_4
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = iqta_contract_0 }
									}
								}
								add_law = iqta_contract_0
							}	
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = iqta_contract_1 }
									}
								}
								add_law = iqta_contract_1
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = iqta_contract_2 }
									}
								}
								add_law = iqta_contract_2
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = iqta_contract_3 }
									}
								}
								add_law = iqta_contract_3
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = iqta_contract_4 }
									}
								}
								add_law = iqta_contract_4
							}							
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = city_tax_0 }
									}
								}
								add_law = city_tax_0
							}	
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = city_tax_1 }
									}
								}
								add_law = city_tax_1
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = city_tax_2 }
									}
								}
								add_law = city_tax_2
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = city_tax_3 }
									}
								}
								add_law = city_tax_3
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = city_tax_4 }
									}
								}
								add_law = city_tax_4
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = city_contract_0 }
									}
								}
								add_law = city_contract_0
							}	
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = city_contract_1 }
									}
								}
								add_law = city_contract_1
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = city_contract_2 }
									}
								}
								add_law = city_contract_2
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = city_contract_3 }
									}
								}
								add_law = city_contract_3
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = city_contract_4 }
									}
								}
								add_law = city_contract_4
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = temple_tax_0 }
									}
								}
								add_law = temple_tax_0
							}	
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = temple_tax_1 }
									}
								}
								add_law = temple_tax_1
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = temple_tax_2 }
									}
								}
								add_law = temple_tax_2
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = temple_tax_3 }
									}
								}
								add_law = temple_tax_3
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = temple_tax_4 }
									}
								}
								add_law = temple_tax_4
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = temple_contract_0 }
									}
								}
								add_law = temple_contract_0
							}	
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = temple_contract_1 }
									}
								}
								add_law = temple_contract_1
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = temple_contract_2 }
									}
								}
								add_law = temple_contract_2
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = temple_contract_3 }
									}
								}
								add_law = temple_contract_3
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = temple_contract_4 }
									}
								}
								add_law = temple_contract_4
							}					
							if = {
								limit = {
									ROOT = { 
										primary_title = {
											NOT = {
												has_law = centralization_0
												has_law = centralization_1
												has_law = centralization_2
												has_law = centralization_3
												has_law = centralization_4
											}
										}
									}
								}
								add_law = centralization_1
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = centralization_0 }
									}
								}
								add_law = centralization_0
							}	
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = centralization_1 }
									}
								}
								add_law = centralization_1
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = centralization_2 }
									}
								}
								add_law = centralization_2
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = centralization_3 }
									}
								}
								add_law = centralization_3
							}
							if = {
								limit = {
									ROOT = { 
										primary_title = { has_law = centralization_4 }
									}
								}
								add_law = centralization_4
							}							
							gain_title = ROOT							
							ROOT = { 
								wealth = -250
								prestige = 500
								set_variable = { which = "loan_amount" value = 250 }
								add_character_modifier = { name = "loan_timer" duration = -1 }
								clr_character_flag = no_prestige_loss_on_succ_law
							}
							set_global_flag = title_created
						}
						if = {
							limit = {
								ROOT = { check_variable = { which = "kingdom_provinces" value = 0.5 } }
								has_holder = yes
								NOT = { has_global_flag = title_created }
							}
							usurp_title = ROOT
							ROOT = { 
								wealth = -250
								prestige = 125
								set_variable = { which = "loan_amount" value = 250 }
								add_character_modifier = { name = "loan_timer" duration = -1 }
							}						
							set_global_flag = title_created
						}					
						ROOT = { set_variable = { which = "kingdom_provinces" value = 0 } }
					}
				}
			}
			any_demesne_title = {
				location = { clr_province_flag = province_counted }
			}			
			any_playable_ruler = {
				any_demesne_title = {
					location = { clr_province_flag = province_counted }
				}
			}
			clr_character_flag = centralize_without_penalties
			clr_global_flag = title_created
		}
	}
}

character_event = {
	id = 110028
	picture = "GFX_evt_council"
	
	trigger = {
		war = no
		is_ruler = yes
		higher_tier_than = BARON
		primary_title = {
			OR = {
				#no crown law or autonomous vassals: allows 0-1
				AND = {
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
					OR = {
						has_law = iqta_tax_2
						has_law = iqta_tax_3
						has_law = iqta_tax_4					
						has_law = iqta_contract_2
						has_law = iqta_contract_3
						has_law = iqta_contract_4					
						has_law = feudal_tax_2
						has_law = feudal_tax_3
						has_law = feudal_tax_4					
						has_law = feudal_contract_2
						has_law = feudal_contract_3
						has_law = feudal_contract_4
						has_law = city_tax_2
						has_law = city_tax_3
						has_law = city_tax_4					
						has_law = city_contract_2
						has_law = city_contract_3
						has_law = city_contract_4	
						has_law = temple_tax_2
						has_law = temple_tax_3
						has_law = temple_tax_4					
						has_law = temple_contract_2
						has_law = temple_contract_3
						has_law = temple_contract_4						
					}
				}
				#low crown authority: allows 0-2
				AND = {
					NOT = {
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
					OR = {
						has_law = iqta_tax_3
						has_law = iqta_tax_4					
						has_law = iqta_contract_3
						has_law = iqta_contract_4					
						has_law = feudal_tax_3
						has_law = feudal_tax_4					
						has_law = feudal_contract_3
						has_law = feudal_contract_4
						has_law = city_tax_3
						has_law = city_tax_4					
						has_law = city_contract_3
						has_law = city_contract_4	
						has_law = temple_tax_3
						has_law = temple_tax_4					
						has_law = temple_contract_3
						has_law = temple_contract_4						
					}
				}
				#medium crown authority: allows 0-3
				AND = {
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
					OR = {
						has_law = iqta_tax_4					
						has_law = iqta_contract_4					
						has_law = feudal_tax_4					
						has_law = feudal_contract_4
						has_law = city_tax_4					
						has_law = city_contract_4	
						has_law = temple_tax_4
						has_law = temple_contract_4						
					}
				}					
			}	
		}
	}
		
	desc = "EVTDESC110027"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		primary_title = {
			if = {
				limit = {
					has_law = iqta_tax_2
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = iqta_tax_1
			}
			if = {
				limit = {
					has_law = iqta_tax_3
					NOT = {
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = iqta_tax_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = iqta_tax_2
				}			
			}	
			if = {
				limit = {
					has_law = iqta_tax_4
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = iqta_tax_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = iqta_tax_2
				}
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_2 }
					}
					add_law = iqta_tax_3
				}				
			}
			if = {
				limit = {
					has_law = iqta_contract_2
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = iqta_contract_1
			}
			if = {
				limit = {
					has_law = iqta_contract_3
					NOT = {
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = iqta_contract_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = iqta_contract_2
				}			
			}	
			if = {
				limit = {
					has_law = iqta_contract_4
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = iqta_contract_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = iqta_contract_2
				}
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_2 }
					}
					add_law = iqta_contract_3
				}				
			}		
			if = {
				limit = {
					has_law = feudal_tax_2
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = feudal_tax_1
			}
			if = {
				limit = {
					has_law = feudal_tax_3
					NOT = {
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = feudal_tax_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = feudal_tax_2
				}			
			}	
			if = {
				limit = {
					has_law = feudal_tax_4
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = feudal_tax_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = feudal_tax_2
				}
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_2 }
					}
					add_law = feudal_tax_3
				}				
			}
			if = {
				limit = {
					has_law = feudal_contract_2
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = feudal_contract_1
			}
			if = {
				limit = {
					has_law = feudal_contract_3
					NOT = {
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = feudal_contract_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = feudal_contract_2
				}			
			}	
			if = {
				limit = {
					has_law = feudal_contract_4
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = feudal_contract_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = feudal_contract_2
				}
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_2 }
					}
					add_law = feudal_contract_3
				}				
			}		
			if = {
				limit = {
					has_law = city_tax_2
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = city_tax_1
			}
			if = {
				limit = {
					has_law = city_tax_3
					NOT = {
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = city_tax_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = city_tax_2
				}			
			}	
			if = {
				limit = {
					has_law = city_tax_4
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = city_tax_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = city_tax_2
				}
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_2 }
					}
					add_law = city_tax_3
				}				
			}
			if = {
				limit = {
					has_law = city_contract_2
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = city_contract_1
			}
			if = {
				limit = {
					has_law = city_contract_3
					NOT = {
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = city_contract_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = city_contract_2
				}			
			}	
			if = {
				limit = {
					has_law = city_contract_4
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = city_contract_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = city_contract_2
				}
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_2 }
					}
					add_law = city_contract_3
				}				
			}
			if = {
				limit = {
					has_law = temple_tax_2
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = temple_tax_1
			}
			if = {
				limit = {
					has_law = temple_tax_3
					NOT = {
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = temple_tax_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = temple_tax_2
				}			
			}	
			if = {
				limit = {
					has_law = temple_tax_4
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = temple_tax_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = temple_tax_2
				}
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_2 }
					}
					add_law = temple_tax_3
				}				
			}
			if = {
				limit = {
					has_law = temple_contract_2
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = temple_contract_1
			}
			if = {
				limit = {
					has_law = temple_contract_3
					NOT = {
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = temple_contract_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = temple_contract_2
				}			
			}	
			if = {
				limit = {
					has_law = temple_contract_4
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }							
						}
					}
					add_law = temple_contract_1
				}			
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_1 }
					}
					add_law = temple_contract_2
				}
				if = {
					limit = {
						crownlaw_title = { has_law = centralization_2 }
					}
					add_law = temple_contract_3
				}				
			}			
		}
	}
}

character_event = {
	id = 110029
	
	trigger = {
		ai = yes
		tier = EMPEROR
		num_of_king_titles = 2
		any_realm_lord = {
			religion = ROOT
			culture_group = ROOT
			is_liege_or_above = ROOT			
			any_demesne_title = {
				tier = COUNT					
				location = {
					kingdom = {
						NOT = { title = k_israel }
						NOT = { title = k_france }
						NOT = { title = k_persia }
						NOT = { title = k_germany }
						holder_scope = { character = ROOT }
						NOT = {
							ROOT = {
								capital_scope = {
									kingdom = { title = PREVPREVPREV }
								}									
							}
						}
					}	
				}
			}				
		}
	}
		
	desc = "EVTDESC110017"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "EVTOPTA110017"
		hidden_tooltip = {
			#try to give it to a duke with their capital in the kingdom
			#give it to lords with good relationship + same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							NOT = { title = k_israel }
							NOT = { title = k_france }
							NOT = { title = k_persia }
							NOT = { title = k_germany }
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							NOT = { title = k_israel }
							NOT = { title = k_france }
							NOT = { title = k_persia }
							NOT = { title = k_germany }
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							NOT = { title = k_israel }
							NOT = { title = k_france }
							NOT = { title = k_persia }
							NOT = { title = k_germany }
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			#give it to lords with good relationship + same culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							NOT = { title = k_israel }
							NOT = { title = k_france }
							NOT = { title = k_persia }
							NOT = { title = k_germany }
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							NOT = { title = k_israel }
							NOT = { title = k_france }
							NOT = { title = k_persia }
							NOT = { title = k_germany }
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							NOT = { title = k_israel }
							NOT = { title = k_france }
							NOT = { title = k_persia }
							NOT = { title = k_germany }
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			#try to give it to a duke who has a province in the kingdom
			#same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = DUKE
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = DUKE
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = DUKE
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			#same culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = DUKE
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = DUKE
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = DUKE
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}						
			#give it to anyone with their capital in the kingdom
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}			
			#anyone with a province in the kingdom
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = DUKE
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = DUKE
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}			
			#try to give it to a duke with their capital in the kingdom
			#give it to lords with good relationship + same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			#give it to lords with good relationship + same culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = DUKE
					}
					capital_scope = {
						kingdom = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}			
			#try to give it to a king who has a province in the kingdom
			#same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = KING
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = KING
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = KING
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			#same culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = KING
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = KING
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = KING
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}					
			#give it to anyone with their capital in the kingdom
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = KING
					}
					capital_scope = {
						kingdom = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = KING
					}
					capital_scope = {
						kingdom = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										kingdom = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					kingdom = {
						grant_title = PREVPREV
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}			
			#anyone with a province in the kingdom
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = KING
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = KING
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}						
			#if all else fails, give it to any vassal that has land in the kingdom
			#same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}	
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			#culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}	
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}			
			#anyone
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					culture = ROOT
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = kingdom_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					culture_group = ROOT
					any_demesne_title = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							kingdom = {
								NOT = { title = k_israel }
								NOT = { title = k_france }
								NOT = { title = k_persia }
								NOT = { title = k_germany }
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											kingdom = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						kingdom = {
							grant_title = PREVPREVPREV
						}
					}
				}
				set_defacto_liege = ROOT
				set_global_flag = kingdom_granted
			}						
			clr_global_flag = kingdom_granted	
			character_event = { id = 110029 }
		}
	}
}

character_event = {
	id = 110031	
	
	trigger = {
		is_ruler = no
		OR = {
			trait = tyrant1
			trait = tyrant2
			trait = tyrant3
			trait = tyrant4
			trait = tyrant5
			trait = tyrant6
			trait = tyrant7
			trait = tyrant8
			trait = tyrant9
			trait = tyrant10
			trait = tyrant11
			trait = tyrant12
			trait = tyrant13
			trait = tyrant14
			trait = tyrant15
			trait = tyrant16
			trait = tyrant17
			trait = tyrant18
			trait = tyrant19
			trait = tyrant20
		}
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		remove_trait = tyrant1
		remove_trait = tyrant2
		remove_trait = tyrant3
		remove_trait = tyrant4
		remove_trait = tyrant5
		remove_trait = tyrant6
		remove_trait = tyrant7
		remove_trait = tyrant8
		remove_trait = tyrant9
		remove_trait = tyrant10
		remove_trait = tyrant11
		remove_trait = tyrant12
		remove_trait = tyrant13
		remove_trait = tyrant14
		remove_trait = tyrant15
		remove_trait = tyrant16
		remove_trait = tyrant17
		remove_trait = tyrant18
		remove_trait = tyrant19
		remove_trait = tyrant20
	}
}

character_event = {
	id = 110033
	is_triggered_only = yes
	trigger = {
		war = no
		is_ruler = yes
		tier = emperor
		check_variable = { which = "realm_size" value = 0.5 }
		NOT = { check_variable = { which = "realm_size" value = 100.5 } }
		any_demesne_title = {
			tier = emperor
			NOT = {
				title = e_rebels
				title = e_pirates
				title = e_papal_state
				title = e_golden_horde
				title = e_il-khanate
				title = e_timurids
				title = e_mexikha
				AND = {
					title = e_latin_empire
					c_byzantion = { holder_scope = { same_realm = ROOT } }
				}					
				AND = {
					title = e_byzantium
					c_byzantion = { holder_scope = { same_realm = ROOT } }
				}	
			}
		}
	}
		
	desc = "EVTDESC110033"

	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "EVTOPTA110033"
		any_demesne_title = {
			limit = {
				tier = emperor
				NOT = {
					title = e_rebels
					title = e_pirates
					title = e_papal_state
					title = e_golden_horde
					title = e_il-khanate
					title = e_timurids
					title = e_mexikha
					AND = {
						title = e_latin_empire
						c_byzantion = { holder_scope = { same_realm = ROOT } }
					}						
					AND = {
						title = e_byzantium
						c_byzantion = { holder_scope = { same_realm = ROOT } }
					}	
				}					
			}			
			destroy_landed_title = yes
			prestige = -1000
		}
	}
}


character_event = {
	id = 110034
	is_triggered_only = yes	
	
	trigger = {
		#ai = yes
		#at least 200 wealth for 500 mercs
		wealth = 200
		#maintain a buffer to pay troops
		NOT = {
			AND = {
				monthly_income = 5
				NOT = { wealth = 300 }			
			}
			AND = {
				monthly_income = 10
				NOT = { wealth = 400 }			
			}			
			AND = {
				monthly_income = 15
				NOT = { wealth = 500 }			
			}			
			AND = {
				monthly_income = 20
				NOT = { wealth = 600 }			
			}			
			AND = {
				monthly_income = 25
				NOT = { wealth = 700 }			
			}			
		}
		OR = {
			#fighting the player or fighting a superior opponent: hire up to 10k
			AND = {
				any_war = {
					OR = {
						AND = {
							defender = { character = ROOT }
							attacker = { ai = no }
						}
						AND = {
							defender = { character = ROOT tier = count }
							attacker = { higher_tier_than = count }
						}
						AND = {
							defender = { character = ROOT tier = duke }
							attacker = { higher_tier_than = duke }
						}
						AND = {
							defender = { character = ROOT tier = king }
							attacker = { higher_tier_than = king }
						}
						AND = {
							defender = { character = ROOT tier = emperor }
							attacker = { higher_tier_than = emperor }
						}
					}						
				}
				NOT = { check_variable = { which = "mercenaries_raised" value = 9.5 } }
			}
			#fighting an emperor: hire up to 8k
			AND = {
				any_war = {
					OR = {
						AND = {
							attacker = { character = ROOT tier = count }
							defender = { higher_tier_than = count }
						}						
						AND = {
							attacker = { character = ROOT tier = duke }
							defender = { higher_tier_than = duke }
						}						
						AND = {
							attacker = { character = ROOT tier = king }
							defender = { higher_tier_than = king }
						}						
						AND = {
							attacker = { character = ROOT tier = emperor }
							defender = { higher_tier_than = emperor }
						}					
						AND = {
							attacker = { character = ROOT }
							defender = { ai = no }
						}					
						AND = {
							defender = { character = ROOT }
							attacker = { tier = emperor }
						}
					}						
				}
				NOT = { check_variable = { which = "mercenaries_raised" value = 7.5 } }
			}
			#fighting a king: hire up to 6k
			AND = {
				any_war = {
					OR = {
						AND = {
							attacker = { character = ROOT }
							defender = { tier = emperor }
						}					
						AND = {
							defender = { character = ROOT }
							attacker = { tier = king }
						}
					}						
				}
				NOT = { check_variable = { which = "mercenaries_raised" value = 5.5 } }
			}
			#fighting a duke: hire up to 4k
			AND = {
				any_war = {
					OR = {
						AND = {
							attacker = { character = ROOT }
							defender = { tier = king }
						}					
						AND = {
							defender = { character = ROOT }
							attacker = { tier = duke }
						}
					}						
				}
				NOT = { check_variable = { which = "mercenaries_raised" value = 3.5 } }
			}
			#always hire up to 2k if we are leading either side
			AND = {
				any_war = {
					OR = {
						attacker = { character = ROOT }
						defender = { character = ROOT }
					}						
				}
				NOT = { check_variable = { which = "mercenaries_raised" value = 1.5 } }
			}			
		}
	}
		
	desc = "AI_EVENT"
	
	option = {
		name = "OK"
		if = {
			limit = {
				wealth = 200
				NOT = { wealth = 350 }
			}
			wealth = -100
			create_random_soldier = {
				random_traits = yes
				dynasty = random
				female = no
				religion = ROOT
				culture = ROOT
			}
			new_character = {
				character_event = { id = 110037 days = 1 }
			}			
			change_variable = { which = "mercenaries_raised" value = 0.5 }			
		}		
		if = {
			limit = {
				wealth = 350
				NOT = { wealth = 600 }
			}
			wealth = -200	
			create_random_soldier = {
				random_traits = yes
				dynasty = random
				female = no
				religion = ROOT
				culture = ROOT
			}					
			new_character = {
				character_event = { id = 110036 days = 1 }
			}
			change_variable = { which = "mercenaries_raised" value = 1 }			
		}
		if = {
			limit = {
				wealth = 600
			}
			wealth = -400	
			create_random_soldier = {
				random_traits = yes
				dynasty = random
				female = no
				religion = ROOT
				culture = ROOT
			}					
			new_character = {
				character_event = { id = 110035 days = 1 }
			}
			change_variable = { which = "mercenaries_raised" value = 2 }			
		}		
		character_event = { id = 110034 }
	}
}

character_event = {
	id = 110035
	is_triggered_only = yes
		
	desc = "AI_EVENT"
	
	option = {
		name = "OK"
		spawn_unit = {
			province = prev
			troops =
			{
				archers = { 600 600 }
				light_infantry = { 600 600 }
				heavy_infantry = { 300 300 }
				pikemen = { 300 300 }
				light_cavalry = { 200 200 }
			}
		}
	}
}

character_event = {
	id = 110036
	is_triggered_only = yes
		
	desc = "AI_EVENT"
	
	option = {
		name = "OK"
		spawn_unit = {
			province = prev
			troops =
			{
				archers = { 300 300 }
				light_infantry = { 300 300 }
				heavy_infantry = { 150 150 }
				pikemen = { 150 150 }
				light_cavalry = { 100 100 }
			}
		}
	}
}

character_event = {
	id = 110037
	is_triggered_only = yes
		
	desc = "AI_EVENT"
	
	option = {
		name = "OK"
		spawn_unit = {
			province = prev
			troops =
			{
				archers = { 150 150 }
				light_infantry = { 150 150 }
				heavy_infantry = { 75 75 }
				pikemen = { 75 75 }
				light_cavalry = { 50 50 }
			}
		}
	}
}

character_event = {
	id = 110039
	is_triggered_only = yes
	
	trigger = {
		ai = yes
		is_ruler = no
		age = 16
		wealth = 50
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		wealth = -50
		if = {
			limit = {
				has_character_modifier = estates_4
			}
			remove_character_modifier = estates_4
			add_character_modifier = {
				name = "estates_5"
				duration = -1
			}
		}			
		if = {
			limit = {
				has_character_modifier = estates_3
			}
			remove_character_modifier = estates_3
			add_character_modifier = {
				name = "estates_4"
				duration = -1
			}
		}			
		if = {
			limit = {
				has_character_modifier = estates_2
			}
			remove_character_modifier = estates_2
			add_character_modifier = {
				name = "estates_3"
				duration = -1
			}
		}			
		if = {
			limit = {
				has_character_modifier = estates_1
			}
			remove_character_modifier = estates_1
			add_character_modifier = {
				name = "estates_2"
				duration = -1
			}
		}			
		if = {
			limit = {
				NOT = {
					has_character_modifier = estates_1
					has_character_modifier = estates_2
					has_character_modifier = estates_3
					has_character_modifier = estates_4
					has_character_modifier = estates_5					
				}
			}
			add_character_modifier = {
				name = "estates_1"
				duration = -1
			}
		}		
	}
}

character_event = {
	id = 110040
	picture = "GFX_evt_council"	
	is_triggered_only = yes
	
	trigger = {
		is_ruler = yes
		OR = {
			has_character_modifier = estates_1
			has_character_modifier = estates_2
			has_character_modifier = estates_3
			has_character_modifier = estates_4
			has_character_modifier = estates_5
		}
	}
		
	desc = "EVTDESC110040"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		if = {
			limit = {
				has_character_modifier = estates_1
			}
			remove_character_modifier = estates_1
			wealth = 40
		}
		if = {
			limit = {
				has_character_modifier = estates_2
			}
			remove_character_modifier = estates_2
			wealth = 80					
		}
		if = {
			limit = {
				has_character_modifier = estates_3
			}
			remove_character_modifier = estates_3
			wealth = 120				
		}	
		if = {
			limit = {
				has_character_modifier = estates_4
			}
			remove_character_modifier = estates_4
			wealth = 160					
		}
		if = {
			limit = {
				has_character_modifier = estates_5
			}
			remove_character_modifier = estates_5
			wealth = 200	
		}
	}
}

character_event = {
	id = 110042
	picture = "GFX_evt_council"	
	
	trigger = {
		always = no
		ai = yes
		is_ruler = yes
		independent = yes
		NOT = { religion_group = christian }
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		years = 20
		modifier = {
			factor = 0.01
			NOT = {
				has_character_flag = allow_duchy_conquest
				has_character_flag = allow_holy_war
			}
		}
	}
	
	option = {
		name = "OK"
		ai_chance = {
			factor = 40
			modifier = {
				factor = 2
				culture = maghreb_arabic
				higher_tier_than = duke
			}				
		}
		set_character_flag = allow_duchy_conquest 
		clr_character_flag = allow_holy_war	
	}
	option = {
		name = "OK"
		ai_chance = { 
			factor = 40
			modifier = {
				factor = 2
				culture = turkish
				higher_tier_than = duke
			}		
		}		
		clr_character_flag = allow_duchy_conquest 
		set_character_flag = allow_holy_war	
	}
	option = {
		name = "OK"
		ai_chance = { factor = 20 }		
		set_character_flag = allow_duchy_conquest 
		set_character_flag = allow_holy_war	
	}	
}

character_event = {
	id = 110043
	is_triggered_only = yes
	
	trigger = {
		trait = crowned_by_pope
		NOT = { has_landed_title = e_hre }
	}
		
	desc = "EVTDESC110043"
	
	mean_time_to_happen = {
		days = 1		
	}
	

	option = {
		name = "EVTOPTA110043"
		remove_trait = crowned_by_pope
	}
}

character_event = {
	id = 110044
	picture = "GFX_evt_death"
	
	is_triggered_only = yes
	
	desc = "EVTDESC110044"
	
	immediate = { 
		hidden_tooltip = {
			if = {
				limit = { ai = no }
				clr_global_flag = maintenance_pulse
			}
			if = {
				limit = {
					is_ruler = yes
				}
				if = {
					limit = { has_character_flag = khan_threatens_player }
					current_heir = {
						set_character_flag = khan_threatens_player
					}
				}				
				if = {
					limit = { has_character_flag = faction_feudal_war }
					current_heir = {
						set_character_flag = faction_feudal_war
					}
				}
				if = {
					limit = { has_character_flag = faction_court_war }
					current_heir = {
						set_character_flag = faction_court_war
					}
				}
				if = {
					limit = { has_character_flag = faction_republican_war }
					current_heir = {
						set_character_flag = faction_republican_war
					}
				}
				if = {
					limit = { has_character_flag = faction_religious_war }
					current_heir = {
						set_character_flag = faction_religious_war
					}
				}	
				if = {
					limit = { has_character_flag = faction_separatist_war }
					current_heir = {
						set_character_flag = faction_separatist_war
					}
				}	
				if = {
					limit = { has_character_flag = faction_pretender_war }
					current_heir = {
						set_character_flag = faction_pretender_war
					}
				}					
			}
			if = {
				limit = {
					is_ruler = yes
					current_heir = { lower_tier_than = ROOT }
				}
				if = {
					limit = { trait = loyalist }
					current_heir = { add_trait = loyalist }
				}
				if = {
					limit = { trait = rebel }
					current_heir = { add_trait = rebel }
					random_playable_ruler = {
						limit = {
							reverse_has_opinion_modifier = {
								who = ROOT
								modifier = revolting_against
							}
						}
						ROOT = {
							current_heir = {
								opinion = { who = PREVPREV modifier = revolting_against years = 100 }										
							}
						}
					}
				}
				current_heir = {
					any_playable_ruler = {
						limit = {
							has_opinion_modifier = {
								who = ROOT
								modifier = revolting_against
							}
						}
						opinion = { who = PREV modifier = revolting_against years = 100 }	
					}
				}
				current_heir = {
					set_variable = { which = "faction_mood_feudal" value = 0 }
					set_variable = { which = "faction_mood_court" value = 0 }
					set_variable = { which = "faction_mood_republican" value = 0 }
					set_variable = { which = "faction_mood_religious" value = 0 }
				}	
				current_heir = {
					clr_character_flag = faction_feudal_happy
					clr_character_flag = faction_feudal_unhappy
					clr_character_flag = faction_feudal_angry
					clr_character_flag = faction_republican_happy
					clr_character_flag = faction_republican_unhappy
					clr_character_flag = faction_republican_angry	
					clr_character_flag = faction_religious_happy
					clr_character_flag = faction_religious_unhappy
					clr_character_flag = faction_religious_angry
					clr_character_flag = faction_court_happy
					clr_character_flag = faction_court_unhappy
					clr_character_flag = faction_court_angry						
				}
				if = {
					limit = { has_character_flag = faction_feudal_happy }
					current_heir = { set_character_flag = faction_feudal_happy }
				}
				if = {
					limit = { has_character_flag = faction_feudal_unhappy }
					current_heir = { set_character_flag = faction_feudal_unhappy }
				}
				if = {
					limit = { has_character_flag = faction_feudal_angry }
					current_heir = { set_character_flag = faction_feudal_angry }
				}
				if = {
					limit = { has_character_flag = faction_republican_happy }
					current_heir = { set_character_flag = faction_republican_happy }
				}
				if = {
					limit = { has_character_flag = faction_republican_unhappy }
					current_heir = { set_character_flag = faction_republican_unhappy }
				}
				if = {
					limit = { has_character_flag = faction_republican_angry }
					current_heir = { set_character_flag = faction_republican_angry }
				}				
				if = {
					limit = { has_character_flag = faction_religious_happy }
					current_heir = { set_character_flag = faction_religious_happy }
				}
				if = {
					limit = { has_character_flag = faction_religious_unhappy }
					current_heir = { set_character_flag = faction_religious_unhappy }
				}
				if = {
					limit = { has_character_flag = faction_religious_angry }
					current_heir = { set_character_flag = faction_religious_angry }
				}				
				if = {
					limit = { has_character_flag = faction_court_happy }
					current_heir = { set_character_flag = faction_court_happy }
				}
				if = {
					limit = { has_character_flag = faction_court_unhappy }
					current_heir = { set_character_flag = faction_court_unhappy }
				}
				if = {
					limit = { has_character_flag = faction_court_angry }
					current_heir = { set_character_flag = faction_court_angry }
				}				
			}
			if = {
				limit = {
					ai = yes
					is_ruler = no
					OR = {
						has_character_modifier = estates_1
						has_character_modifier = estates_2
						has_character_modifier = estates_3
						has_character_modifier = estates_4
						has_character_modifier = estates_5
					}
					any_child = {
						is_female = no
						is_alive = yes
						is_ruler = no
						NOT = { has_character_modifier = estates_5 }
						NOT = { trait = bastard }
					}				
				}
				any_child = {
					limit = {
						is_female = no
						is_alive = yes
						NOT = { has_character_modifier = estates_5 }
						NOT = { trait = bastard }
					}
					if = {
						limit = {
							is_ruler = yes
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}					
						}
						wealth = 50
					}
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}				
							has_character_modifier = estates_4
						}
						remove_character_modifier = estates_4
						add_character_modifier = {
							name = "estates_5"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_3
						}
						remove_character_modifier = estates_3
						add_character_modifier = {
							name = "estates_4"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_2
						}
						remove_character_modifier = estates_2
						add_character_modifier = {
							name = "estates_3"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_1
						}
						remove_character_modifier = estates_1
						add_character_modifier = {
							name = "estates_2"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							NOT = {
								has_character_modifier = estates_1
								has_character_modifier = estates_2
								has_character_modifier = estates_3
								has_character_modifier = estates_4
								has_character_modifier = estates_5					
							}
						}
						add_character_modifier = {
							name = "estates_1"
							duration = -1
						}
						hidden_tooltip = {
							give_minor_title = title_lord
						}				
					}			
					ROOT = {
						if = {
							limit = {
								has_character_modifier = estates_1
							}
							remove_character_modifier = estates_1
						}
						if = {
							limit = {
								has_character_modifier = estates_2
							}
							remove_character_modifier = estates_2
							add_character_modifier = {
								name = "estates_1"
								duration = -1
							}					
						}
						if = {
							limit = {
								has_character_modifier = estates_3
							}
							remove_character_modifier = estates_3
							add_character_modifier = {
								name = "estates_2"
								duration = -1
							}					
						}	
						if = {
							limit = {
								has_character_modifier = estates_4
							}
							remove_character_modifier = estates_4
							add_character_modifier = {
								name = "estates_3"
								duration = -1
							}					
						}
						if = {
							limit = {
								has_character_modifier = estates_5
							}
							remove_character_modifier = estates_5
							add_character_modifier = {
								name = "estates_4"
								duration = -1
							}					
						}				
					}
				}
				any_child = {
					limit = {
						is_female = no
						is_alive = yes
						NOT = { has_character_modifier = estates_5 }
						NOT = { trait = bastard }
					}
					if = {
						limit = {
							is_ruler = yes
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}					
						}
						wealth = 50
					}
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}				
							has_character_modifier = estates_4
						}
						remove_character_modifier = estates_4
						add_character_modifier = {
							name = "estates_5"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_3
						}
						remove_character_modifier = estates_3
						add_character_modifier = {
							name = "estates_4"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_2
						}
						remove_character_modifier = estates_2
						add_character_modifier = {
							name = "estates_3"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_1
						}
						remove_character_modifier = estates_1
						add_character_modifier = {
							name = "estates_2"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							NOT = {
								has_character_modifier = estates_1
								has_character_modifier = estates_2
								has_character_modifier = estates_3
								has_character_modifier = estates_4
								has_character_modifier = estates_5					
							}
						}
						add_character_modifier = {
							name = "estates_1"
							duration = -1
						}
						hidden_tooltip = {
							give_minor_title = title_lord
						}				
					}			
					ROOT = {
						if = {
							limit = {
								has_character_modifier = estates_1
							}
							remove_character_modifier = estates_1
						}
						if = {
							limit = {
								has_character_modifier = estates_2
							}
							remove_character_modifier = estates_2
							add_character_modifier = {
								name = "estates_1"
								duration = -1
							}					
						}
						if = {
							limit = {
								has_character_modifier = estates_3
							}
							remove_character_modifier = estates_3
							add_character_modifier = {
								name = "estates_2"
								duration = -1
							}					
						}	
						if = {
							limit = {
								has_character_modifier = estates_4
							}
							remove_character_modifier = estates_4
							add_character_modifier = {
								name = "estates_3"
								duration = -1
							}					
						}
						if = {
							limit = {
								has_character_modifier = estates_5
							}
							remove_character_modifier = estates_5
							add_character_modifier = {
								name = "estates_4"
								duration = -1
							}					
						}				
					}
				}
				any_child = {
					limit = {
						is_female = no
						is_alive = yes
						NOT = { has_character_modifier = estates_5 }
						NOT = { trait = bastard }
					}
					if = {
						limit = {
							is_ruler = yes
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}					
						}
						wealth = 50
					}
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}				
							has_character_modifier = estates_4
						}
						remove_character_modifier = estates_4
						add_character_modifier = {
							name = "estates_5"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_3
						}
						remove_character_modifier = estates_3
						add_character_modifier = {
							name = "estates_4"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_2
						}
						remove_character_modifier = estates_2
						add_character_modifier = {
							name = "estates_3"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_1
						}
						remove_character_modifier = estates_1
						add_character_modifier = {
							name = "estates_2"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							NOT = {
								has_character_modifier = estates_1
								has_character_modifier = estates_2
								has_character_modifier = estates_3
								has_character_modifier = estates_4
								has_character_modifier = estates_5					
							}
						}
						add_character_modifier = {
							name = "estates_1"
							duration = -1
						}
						hidden_tooltip = {
							give_minor_title = title_lord
						}				
					}			
					ROOT = {
						if = {
							limit = {
								has_character_modifier = estates_1
							}
							remove_character_modifier = estates_1
						}
						if = {
							limit = {
								has_character_modifier = estates_2
							}
							remove_character_modifier = estates_2
							add_character_modifier = {
								name = "estates_1"
								duration = -1
							}					
						}
						if = {
							limit = {
								has_character_modifier = estates_3
							}
							remove_character_modifier = estates_3
							add_character_modifier = {
								name = "estates_2"
								duration = -1
							}					
						}	
						if = {
							limit = {
								has_character_modifier = estates_4
							}
							remove_character_modifier = estates_4
							add_character_modifier = {
								name = "estates_3"
								duration = -1
							}					
						}
						if = {
							limit = {
								has_character_modifier = estates_5
							}
							remove_character_modifier = estates_5
							add_character_modifier = {
								name = "estates_4"
								duration = -1
							}					
						}				
					}
				}
				any_child = {
					limit = {
						is_female = no
						is_alive = yes
						NOT = { has_character_modifier = estates_5 }
						NOT = { trait = bastard }
					}
					if = {
						limit = {
							is_ruler = yes
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}					
						}
						wealth = 50
					}
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}				
							has_character_modifier = estates_4
						}
						remove_character_modifier = estates_4
						add_character_modifier = {
							name = "estates_5"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_3
						}
						remove_character_modifier = estates_3
						add_character_modifier = {
							name = "estates_4"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_2
						}
						remove_character_modifier = estates_2
						add_character_modifier = {
							name = "estates_3"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_1
						}
						remove_character_modifier = estates_1
						add_character_modifier = {
							name = "estates_2"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							NOT = {
								has_character_modifier = estates_1
								has_character_modifier = estates_2
								has_character_modifier = estates_3
								has_character_modifier = estates_4
								has_character_modifier = estates_5					
							}
						}
						add_character_modifier = {
							name = "estates_1"
							duration = -1
						}
						hidden_tooltip = {
							give_minor_title = title_lord
						}				
					}			
					ROOT = {
						if = {
							limit = {
								has_character_modifier = estates_1
							}
							remove_character_modifier = estates_1
						}
						if = {
							limit = {
								has_character_modifier = estates_2
							}
							remove_character_modifier = estates_2
							add_character_modifier = {
								name = "estates_1"
								duration = -1
							}					
						}
						if = {
							limit = {
								has_character_modifier = estates_3
							}
							remove_character_modifier = estates_3
							add_character_modifier = {
								name = "estates_2"
								duration = -1
							}					
						}	
						if = {
							limit = {
								has_character_modifier = estates_4
							}
							remove_character_modifier = estates_4
							add_character_modifier = {
								name = "estates_3"
								duration = -1
							}					
						}
						if = {
							limit = {
								has_character_modifier = estates_5
							}
							remove_character_modifier = estates_5
							add_character_modifier = {
								name = "estates_4"
								duration = -1
							}					
						}				
					}
				}
				any_child = {
					limit = {
						is_female = no
						is_alive = yes
						NOT = { has_character_modifier = estates_5 }
						NOT = { trait = bastard }
					}
					if = {
						limit = {
							is_ruler = yes
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}					
						}
						wealth = 50
					}
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}				
							has_character_modifier = estates_4
						}
						remove_character_modifier = estates_4
						add_character_modifier = {
							name = "estates_5"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_3
						}
						remove_character_modifier = estates_3
						add_character_modifier = {
							name = "estates_4"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_2
						}
						remove_character_modifier = estates_2
						add_character_modifier = {
							name = "estates_3"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							has_character_modifier = estates_1
						}
						remove_character_modifier = estates_1
						add_character_modifier = {
							name = "estates_2"
							duration = -1
						}
					}			
					if = {
						limit = {
							is_ruler = no
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5					
								}
							}
							NOT = {
								has_character_modifier = estates_1
								has_character_modifier = estates_2
								has_character_modifier = estates_3
								has_character_modifier = estates_4
								has_character_modifier = estates_5					
							}
						}
						add_character_modifier = {
							name = "estates_1"
							duration = -1
						}
						hidden_tooltip = {
							give_minor_title = title_lord
						}				
					}			
					ROOT = {
						if = {
							limit = {
								has_character_modifier = estates_1
							}
							remove_character_modifier = estates_1
						}
						if = {
							limit = {
								has_character_modifier = estates_2
							}
							remove_character_modifier = estates_2
							add_character_modifier = {
								name = "estates_1"
								duration = -1
							}					
						}
						if = {
							limit = {
								has_character_modifier = estates_3
							}
							remove_character_modifier = estates_3
							add_character_modifier = {
								name = "estates_2"
								duration = -1
							}					
						}	
						if = {
							limit = {
								has_character_modifier = estates_4
							}
							remove_character_modifier = estates_4
							add_character_modifier = {
								name = "estates_3"
								duration = -1
							}					
						}
						if = {
							limit = {
								has_character_modifier = estates_5
							}
							remove_character_modifier = estates_5
							add_character_modifier = {
								name = "estates_4"
								duration = -1
							}					
						}				
					}
				}				
			}		
			#fix wrong religion heirs
			if = {
				limit = {
					ai = yes
					is_ruler = yes
					NOT = { is_feudal = yes }
					current_heir = {
						NOT = { religion_group = ROOT }
					}			
				}
				current_heir = {
					religion = ROOT
				}
			}		
			#tyrant
			if = {
				limit = {
					ai = no
					OR = {
						trait = tyrant3
						trait = tyrant4
						trait = tyrant5
						trait = tyrant6
						trait = tyrant7
						trait = tyrant8
						trait = tyrant9
						trait = tyrant10
						trait = tyrant11
						trait = tyrant12
						trait = tyrant13
						trait = tyrant14
						trait = tyrant15
						trait = tyrant16
						trait = tyrant17
						trait = tyrant18
						trait = tyrant19
						trait = tyrant20
					}				
				}
				if = {
					limit = {
						trait = tyrant3
					}
					change_variable = { which = "tyrant" value = 1 }			
				}
				if = {
					limit = {
						trait = tyrant4
					}
					change_variable = { which = "tyrant" value = 2 }			
				}
				if = {
					limit = {
						trait = tyrant5
					}
					change_variable = { which = "tyrant" value = 3 }			
				}
				if = {
					limit = {
						trait = tyrant6
					}
					change_variable = { which = "tyrant" value = 4 }			
				}
				if = {
					limit = {
						trait = tyrant7
					}
					change_variable = { which = "tyrant" value = 5 }			
				}
				if = {
					limit = {
						trait = tyrant8
					}
					change_variable = { which = "tyrant" value = 6 }			
				}
				if = {
					limit = {
						trait = tyrant9
					}
					change_variable = { which = "tyrant" value = 7 }			
				}
				if = {
					limit = {
						trait = tyrant10
					}
					change_variable = { which = "tyrant" value = 8 }		
				}
				if = {
					limit = {
						trait = tyrant11
					}
					change_variable = { which = "tyrant" value = 9 }			
				}
				if = {
					limit = {
						trait = tyrant12
					}
					change_variable = { which = "tyrant" value = 10 }			
				}
				if = {
					limit = {
						trait = tyrant13
					}
					change_variable = { which = "tyrant" value = 11 }			
				}
				if = {
					limit = {
						trait = tyrant14
					}
					change_variable = { which = "tyrant" value = 12 }			
				}
				if = {
					limit = {
						trait = tyrant15
					}
					change_variable = { which = "tyrant" value = 13 }			
				}
				if = {
					limit = {
						trait = tyrant16
					}
					change_variable = { which = "tyrant" value = 14 }			
				}
				if = {
					limit = {
						trait = tyrant17
					}
					change_variable = { which = "tyrant" value = 15 }			
				}
				if = {
					limit = {
						trait = tyrant18
					}
					change_variable = { which = "tyrant" value = 16 }			
				}
				if = {
					limit = {
						trait = tyrant19
					}
					change_variable = { which = "tyrant" value = 17 }			
				}
				if = {
					limit = {
						trait = tyrant20
					}
					change_variable = { which = "tyrant" value = 18 }		
				}			
				if = {
					limit = {
						current_heir = { trait = tyrant1 }
					}
					change_variable = { which = "tyrant" value = 1 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant2 }
					}
					change_variable = { which = "tyrant" value = 2 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant3 }
					}
					change_variable = { which = "tyrant" value = 3 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant4 }
					}
					change_variable = { which = "tyrant" value = 4 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant5 }
					}
					change_variable = { which = "tyrant" value = 5 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant6 }
					}
					change_variable = { which = "tyrant" value = 6 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant7 }
					}
					change_variable = { which = "tyrant" value = 7 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant8 }
					}
					change_variable = { which = "tyrant" value = 8 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant9 }
					}
					change_variable = { which = "tyrant" value = 9 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant10 }
					}
					change_variable = { which = "tyrant" value = 10 }		
				}
				if = {
					limit = {
						current_heir = { trait = tyrant11 }
					}
					change_variable = { which = "tyrant" value = 11 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant12 }
					}
					change_variable = { which = "tyrant" value = 12 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant13 }
					}
					change_variable = { which = "tyrant" value = 13 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant14 }
					}
					change_variable = { which = "tyrant" value = 14 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant15 }
					}
					change_variable = { which = "tyrant" value = 15 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant16 }
					}
					change_variable = { which = "tyrant" value = 16 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant17 }
					}
					change_variable = { which = "tyrant" value = 17 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant18 }
					}
					change_variable = { which = "tyrant" value = 18 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant19 }
					}
					change_variable = { which = "tyrant" value = 19 }			
				}
				if = {
					limit = {
						current_heir = { trait = tyrant20 }
					}
					change_variable = { which = "tyrant" value = 20 }		
				}
				current_heir = {
					remove_trait = tyrant1
					remove_trait = tyrant2
					remove_trait = tyrant3
					remove_trait = tyrant4
					remove_trait = tyrant5
					remove_trait = tyrant6
					remove_trait = tyrant7
					remove_trait = tyrant8
					remove_trait = tyrant9
					remove_trait = tyrant10
					remove_trait = tyrant11
					remove_trait = tyrant12
					remove_trait = tyrant13
					remove_trait = tyrant14
					remove_trait = tyrant15
					remove_trait = tyrant16
					remove_trait = tyrant17
					remove_trait = tyrant18
					remove_trait = tyrant19
					remove_trait = tyrant20
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 0.9 }
						NOT = { check_variable = { which = "tyrant" value = 1.9 } }
					}
					current_heir = {
						add_trait = tyrant1
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 1.9 }
						NOT = { check_variable = { which = "tyrant" value = 2.9 } }
					}
					current_heir = {
						add_trait = tyrant2
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 2.9 }
						NOT = { check_variable = { which = "tyrant" value = 3.9 } }
					}
					current_heir = {
						add_trait = tyrant3
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 3.9 }
						NOT = { check_variable = { which = "tyrant" value = 4.9 } }
					}
					current_heir = {
						add_trait = tyrant4
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 4.9 }
						NOT = { check_variable = { which = "tyrant" value = 5.9 } }
					}
					current_heir = {
						add_trait = tyrant5
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 5.9 }
						NOT = { check_variable = { which = "tyrant" value = 6.9 } }
					}
					current_heir = {
						add_trait = tyrant6
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 6.9 }
						NOT = { check_variable = { which = "tyrant" value = 7.9 } }
					}
					current_heir = {
						add_trait = tyrant7
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 7.9 }
						NOT = { check_variable = { which = "tyrant" value = 8.9 } }
					}
					current_heir = {
						add_trait = tyrant8
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 8.9 }
						NOT = { check_variable = { which = "tyrant" value = 9.9 } }
					}
					current_heir = {
						add_trait = tyrant9
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 9.9 }
						NOT = { check_variable = { which = "tyrant" value = 10.9 } }
					}
					current_heir = {
						add_trait = tyrant10
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 10.9 }
						NOT = { check_variable = { which = "tyrant" value = 11.9 } }
					}
					current_heir = {
						add_trait = tyrant11
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 11.9 }
						NOT = { check_variable = { which = "tyrant" value = 12.9 } }
					}
					current_heir = {
						add_trait = tyrant12
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 12.9 }
						NOT = { check_variable = { which = "tyrant" value = 13.9 } }
					}
					current_heir = {
						add_trait = tyrant13
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 13.9 }
						NOT = { check_variable = { which = "tyrant" value = 14.9 } }
					}
					current_heir = {
						add_trait = tyrant14
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 14.9 }
						NOT = { check_variable = { which = "tyrant" value = 15.9 } }
					}
					current_heir = {
						add_trait = tyrant15
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 15.9 }
						NOT = { check_variable = { which = "tyrant" value = 16.9 } }
					}
					current_heir = {
						add_trait = tyrant16
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 16.9 }
						NOT = { check_variable = { which = "tyrant" value = 17.9 } }
					}
					current_heir = {
						add_trait = tyrant17
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 17.9 }
						NOT = { check_variable = { which = "tyrant" value = 18.9 } }
					}
					current_heir = {
						add_trait = tyrant18
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 18.9 }
						NOT = { check_variable = { which = "tyrant" value = 19.9 } }
					}
					current_heir = {
						add_trait = tyrant19
					}			
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 19.9 }
					}
					current_heir = {
						add_trait = tyrant20
					}			
				}				
			}
			#dishonorable
			if = {
				limit = {
					ai = no
					OR = {
						trait = dishonorable2
						trait = dishonorable3
						trait = dishonorable4
						trait = dishonorable5
						trait = dishonorable6
						trait = dishonorable7
						trait = dishonorable8
						trait = dishonorable9
						trait = dishonorable10
					}					
				}
				if = {
					limit = {
						trait = dishonorable2
					}
					change_variable = { which = "dishonorable" value = 1 }			
				}
				if = {
					limit = {
						trait = dishonorable3
					}
					change_variable = { which = "dishonorable" value = 2 }			
				}
				if = {
					limit = {
						trait = dishonorable4
					}
					change_variable = { which = "dishonorable" value = 3 }			
				}
				if = {
					limit = {
						trait = dishonorable5
					}
					change_variable = { which = "dishonorable" value = 4 }			
				}
				if = {
					limit = {
						trait = dishonorable6
					}
					change_variable = { which = "dishonorable" value = 5 }			
				}
				if = {
					limit = {
						trait = dishonorable7
					}
					change_variable = { which = "dishonorable" value = 6 }			
				}
				if = {
					limit = {
						trait = dishonorable8
					}
					change_variable = { which = "dishonorable" value = 7 }			
				}
				if = {
					limit = {
						trait = dishonorable9
					}
					change_variable = { which = "dishonorable" value = 8 }			
				}
				if = {
					limit = {
						trait = dishonorable10
					}
					change_variable = { which = "dishonorable" value = 9 }		
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable1 }
					}
					change_variable = { which = "dishonorable" value = 1 }			
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable2 }
					}
					change_variable = { which = "dishonorable" value = 2 }			
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable3 }
					}
					change_variable = { which = "dishonorable" value = 3 }			
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable4 }
					}
					change_variable = { which = "dishonorable" value = 4 }			
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable5 }
					}
					change_variable = { which = "dishonorable" value = 5 }			
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable6 }
					}
					change_variable = { which = "dishonorable" value = 6 }			
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable7 }
					}
					change_variable = { which = "dishonorable" value = 7 }			
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable8 }
					}
					change_variable = { which = "dishonorable" value = 8 }			
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable9 }
					}
					change_variable = { which = "dishonorable" value = 9 }			
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable10 }
					}
					change_variable = { which = "dishonorable" value = 10 }		
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable1 }
					}
					change_variable = { which = "dishonorable" value = 1 }			
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable2 }
					}
					change_variable = { which = "dishonorable" value = 2 }			
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable3 }
					}
					change_variable = { which = "dishonorable" value = 3 }			
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable4 }
					}
					change_variable = { which = "dishonorable" value = 4 }			
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable5 }
					}
					change_variable = { which = "dishonorable" value = 5 }			
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable6 }
					}
					change_variable = { which = "dishonorable" value = 6 }			
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable7 }
					}
					change_variable = { which = "dishonorable" value = 7 }			
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable8 }
					}
					change_variable = { which = "dishonorable" value = 8 }			
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable9 }
					}
					change_variable = { which = "dishonorable" value = 9 }			
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable10 }
					}
					change_variable = { which = "dishonorable" value = 10 }		
				}	
				current_heir = {
					remove_trait = dishonorable1
					remove_trait = dishonorable2
					remove_trait = dishonorable3
					remove_trait = dishonorable4
					remove_trait = dishonorable5
					remove_trait = dishonorable6
					remove_trait = dishonorable7
					remove_trait = dishonorable8
					remove_trait = dishonorable9
					remove_trait = dishonorable10
					remove_trait = dyn_dishonorable1
					remove_trait = dyn_dishonorable2
					remove_trait = dyn_dishonorable3
					remove_trait = dyn_dishonorable4
					remove_trait = dyn_dishonorable5
					remove_trait = dyn_dishonorable6
					remove_trait = dyn_dishonorable7
					remove_trait = dyn_dishonorable8
					remove_trait = dyn_dishonorable9
					remove_trait = dyn_dishonorable10				
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 0.9 }
						NOT = { check_variable = { which = "dishonorable" value = 1.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable1
					}			
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 1.9 }
						NOT = { check_variable = { which = "dishonorable" value = 2.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable2
					}			
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 2.9 }
						NOT = { check_variable = { which = "dishonorable" value = 3.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable3
					}			
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 3.9 }
						NOT = { check_variable = { which = "dishonorable" value = 4.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable4
					}			
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 4.9 }
						NOT = { check_variable = { which = "dishonorable" value = 5.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable5
					}			
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 5.9 }
						NOT = { check_variable = { which = "dishonorable" value = 6.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable6
					}			
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 6.9 }
						NOT = { check_variable = { which = "dishonorable" value = 7.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable7
					}			
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 7.9 }
						NOT = { check_variable = { which = "dishonorable" value = 8.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable8
					}			
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 8.9 }
						NOT = { check_variable = { which = "dishonorable" value = 9.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable9
					}			
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 9.9 }
					}
					current_heir = {
						add_trait = dyn_dishonorable10
					}			
				}				
			}					
		}			
	}

	option = {
		name = "EVTOPTA110044"
		if = {
			limit = {
				check_variable = { which = "dishonorable" value = 0.9 }
			}		
			tooltip = {
				current_heir = {
					add_trait = dyn_dishonorable1
				}
			}
		}
		if = {
			limit = {
				check_variable = { which = "tyrant" value = 0.9 }
			}		
			tooltip = {
				current_heir = {
					add_trait = tyrant1
				}
			}
		}		
		set_variable = { which = "dishonorable" value = 0 }
		set_variable = { which = "tyrant" value = 0 }
	}
}

character_event = {
	id = 110045
	is_triggered_only = yes
	trigger = {
		OR = {
			has_landed_title = e_papal_state
			has_landed_title = d_teutonic_order
			has_landed_title = d_knights_hospitaler
			has_landed_title = d_knights_templar	
		}
		NOT = { religion = catholic }
	}
		
	desc = "EVTDESC110045"
	
	mean_time_to_happen = {
		days = 1		
	}
	

	option = {
		name = "EVTOPTA110045"
		religion = catholic
	}
}

character_event = {
	id = 110046
	is_triggered_only = yes
	trigger = {
		has_landed_title = k_orthodox	
		NOT = { religion = orthodox }
	}
		
	desc = "EVTDESC110045"
	
	mean_time_to_happen = {
		days = 1		
	}
	

	option = {
		name = "EVTOPTA110045"
		religion = orthodox
	}
}

character_event = {
	id = 110047
	is_triggered_only = yes
	trigger = {	
		OR = {
			has_landed_title = d_shiite
			has_landed_title = d_ghazi_shiite
			has_landed_title = d_hashshashin			
		}
		NOT = { religion = shiite }
	}
		
	desc = "EVTDESC110045"
	
	mean_time_to_happen = {
		days = 1		
	}
	

	option = {
		name = "EVTOPTA110045"
		religion = shiite
	}
}

character_event = {
	id = 110048
	is_triggered_only = yes
	trigger = {	
		OR = {
			has_landed_title = d_sunni
			has_landed_title = d_ghazi_sunni
			has_landed_title = d_devotees_of_the_true_prophet			
		}
		NOT = { religion = sunni }
	}
		
	desc = "EVTDESC110045"
	
	mean_time_to_happen = {
		days = 1		
	}
	

	option = {
		name = "EVTOPTA110045"
		religion = sunni
	}
}

character_event = {
	id = 110049
	is_triggered_only = yes
	
	trigger = {
		ai = yes 
		age = 18
		OR = {
			is_female = no
			NOT = { age = 40 }
		}
		NOT = { age = 60 }
		NOT = { trait = eunuch }
		NOT = { trait = celibate }
		NOT = { trait = infirm }
		NOT = { trait = incapable }
		is_married = no
		is_betrothed = no
		can_marry = yes
		NOT = { mercenary = yes }
		OR = {
			is_ruler = yes
			liege = { ai = no }
		}
		OR = {
			is_ruler = yes
			is_female = no
		}
		OR = {
			is_ruler = no
			demesne_size = 1
		}
		OR = {
			is_ruler = yes
			liege = { NOT = { is_close_relative = ROOT } }
		}
		OR = {
			is_ruler = no
			primary_title = {
				NOT = {
					title = d_teutonic_order
					title = d_knights_templar
					title = d_knights_hospitaler
					title = d_ghazi_sunni
					title = d_ghazi_shiite
					title = d_hashshashin
					title = d_ulfheonar
					title = d_devotees_of_the_true_prophet
					title = d_great_host
					title = d_guardians_of_the_sacred_flame
					title = d_disciples_of_the_old_gods
					title = e_rebels
					title = e_pirates
				}
			}	
		}
		OR = {
			tier = BARON
			is_feudal = no
			is_ruler = no
		}
		treasury = 10
	}
	
	mean_time_to_happen = {
		days = 1	
	}
		
	desc = "AI_EVENT"
	
	option = {
		name = "OK"
		treasury = -10
		set_character_flag = event_110049
		if = {
			limit = {
				is_female = no
			}
			if = {
				limit = { is_ruler = no }
				liege = {
					#go for younger women first (want to have kids)
					random_courtier = {
						limit = {
							age = 16
							NOT = { age = 20 } 
							NOT = { trait = eunuch }
							NOT = { trait = celibate }
							NOT = { trait = infirm }
							NOT = { trait = incapable }
							prisoner = no
							is_married = no
							is_betrothed = no
							can_marry = yes
							is_female = yes
							is_ruler = no
							is_primary_heir = no
							NOT = { has_global_flag = spouse_found }
							liege = { NOT = { is_close_relative = PREV } }
							NOT = { is_close_relative = ROOT }
						}
						add_spouse = ROOT
						set_global_flag = spouse_found
					}
					random_courtier = {
						limit = {
							age = 20
							NOT = { age = 30 }
							NOT = { trait = eunuch }
							NOT = { trait = celibate }
							NOT = { trait = infirm }
							NOT = { trait = incapable }
							prisoner = no
							is_married = no
							is_betrothed = no
							can_marry = yes
							is_female = yes
							is_ruler = no
							is_primary_heir = no
							NOT = { has_global_flag = spouse_found }
							liege = { NOT = { is_close_relative = PREV } }
							NOT = { is_close_relative = ROOT }								
						}
						add_spouse = ROOT
						set_global_flag = spouse_found
					}
					if = {
						limit = {
							NOT = { has_global_flag = spouse_found }
						}
						liege = {
							create_character = {
								random_traits = yes
								dynasty = random
								female = yes
								age = 16
							}
							new_character = {
								add_spouse = ROOT
							}							
						}
						set_global_flag = spouse_found
					}	
				}
			}
			if = {
				limit = { is_ruler = yes }
				#go for younger women first (want to have kids)
				random_courtier = {
					limit = {
						age = 16
						NOT = { age = 20 } 
						NOT = { trait = eunuch }
						NOT = { trait = celibate }
						NOT = { trait = infirm }
						NOT = { trait = incapable }
						prisoner = no
						is_married = no
						is_betrothed = no
						can_marry = yes
						is_female = yes
						is_ruler = no
						is_primary_heir = no
						NOT = { has_global_flag = spouse_found }
						NOT = { is_close_relative = ROOT }
					}
					add_spouse = ROOT
					set_global_flag = spouse_found
				}
				random_courtier = {
					limit = {
						age = 20
						NOT = { age = 30 }
						NOT = { trait = eunuch }
						NOT = { trait = celibate }
						NOT = { trait = infirm }
						NOT = { trait = incapable }
						prisoner = no
						is_married = no
						is_betrothed = no
						can_marry = yes
						is_female = yes
						is_ruler = no
						is_primary_heir = no
						NOT = { has_global_flag = spouse_found }
						NOT = { is_close_relative = ROOT }								
					}
					add_spouse = ROOT
					set_global_flag = spouse_found
				}
				if = {
					limit = {
						NOT = { has_global_flag = spouse_found }
					}
					create_character = {
						random_traits = yes
						dynasty = random
						female = yes
						age = 16
					}
					new_character = {
						add_spouse = ROOT
					}							
					set_global_flag = spouse_found
				}	
			}	
		}
		if = {
			limit = {
				is_female = yes
				is_ruler = yes
			}
			create_character = {
				random_traits = yes
				dynasty = random
				age = 20
			}
			new_character = {
				add_spouse_matrilineal = ROOT
			}							
			set_global_flag = spouse_found
		}		
		clr_global_flag = spouse_found		
	}
}

# Remove claims
character_event = {
	id = 110050
	desc = "AI_EVENT"
	
	is_triggered_only = yes
	
	trigger = {
		ai = yes
		is_ruler = no
		is_female = yes
		OR = {
			has_claim = d_aquitaine
			has_claim = d_poitou
			has_claim = k_norway
			has_claim = k_rus
		}
	}
	
	option = {
		name = "OK"
		if = {
			limit = { has_claim = d_aquitaine }
			remove_claim = d_aquitaine
		}
		if = {
			limit = { has_claim = d_poitou }
			remove_claim = d_poitou
		}
		if = {
			limit = { has_claim = k_norway }
			remove_claim = k_norway
		}	
		if = {
			limit = { has_claim = k_rus }
			remove_claim = k_rus
		}		
	}
}

#Sanction for holy wars
character_event = {
	id = 110051
	desc = "EVTDESC110051"	
	picture = GFX_evt_pope
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA110051"
		add_character_modifier = {
			name = "sanctioned_holy_war"
			duration = 730
		}
	}
}

character_event = {
	id = 110052
	desc = "EVTDESC110052"	
	picture = GFX_evt_pope
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA110052"
	}
}

character_event = {
	id = 110057
	picture = "GFX_evt_council"
	is_triggered_only = yes
	
	trigger = {
		ai = yes
		is_ruler = yes
		is_feudal = yes
		num_of_vassals = 1
		higher_tier_than = count
		any_vassal = {
			has_ambition = obj_gain_honorary_title
		}
		OR = {
			AND = {
				religion_group = muslim
				higher_tier_than = duke
				OR = {				
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_court_dwarf
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_food_taster
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title =  title_court_calligrapher
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_cupbearer
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_court_musician
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_court_poet
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_chief_architect	
						}
					}						
				}
			}
			AND = {
				religion_group = muslim
				lower_tier_than = king
				OR = {
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_cupbearer
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_court_musician
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_court_poet
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_chief_architect	
						}
					}						
				}
			}
			AND = {
				NOT = { religion_group = muslim }
				NOT = { has_landed_title = e_byzantium }
				higher_tier_than = duke
				OR = {
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_court_dwarf
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_court_jester
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_seneschal
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_keeper_of_swans
						}
					}						
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_cupbearer
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_master_of_the_horse
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_master_of_the_hunt
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_high_almoner
						}
					}						
				}
			}
			AND = {
				NOT = { religion_group = muslim }
				NOT = { has_landed_title = e_byzantium }
				NOT = { has_landed_title = e_roman_empire }
				lower_tier_than = king
				OR = {
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_cupbearer
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_master_of_the_horse
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_master_of_the_hunt
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_high_almoner
						}
					}						
				}
			}
			AND = {
				NOT = { religion_group = muslim }
				OR = {
					has_landed_title = e_byzantium
					has_landed_title = e_roman_empire
				}
				OR = {
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_imperial_eunuch
						}
					}				
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_court_dwarf
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_cupbearer
						}
					}						
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_court_jester
						}
					}					
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_sebastokrator
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_kouropalates
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_caesar
						}
					}
					NOT = {
						any_realm_character = {
							liege = { character = FROM }
							has_minor_title = title_anthypatos
						}
					}						
				}
			}
		}		
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1		
	}

	option = {
		name = "OK"
		random_vassal = {
			limit = {
				is_ruler = yes
				has_ambition = obj_gain_honorary_title	
				NOT = {
					has_minor_title = title_keeper_of_swans
					has_minor_title = title_master_of_the_horse
					has_minor_title = title_master_of_the_hunt
					has_minor_title = title_high_almoner
					has_minor_title = title_cupbearer
					has_minor_title = title_seneschal
					has_minor_title = title_despot
					has_minor_title = title_sebastokrator
					has_minor_title = title_kouropalates	
					has_minor_title = title_caesar
					has_minor_title = title_anthypatos	
					has_minor_title = title_court_dwarf
					has_minor_title = title_court_jester
					has_minor_title = title_food_taster
					has_minor_title = title_court_calligrapher
					has_minor_title = title_court_musician
					has_minor_title = title_court_poet
					has_minor_title = title_chief_architect	
					has_minor_title = title_imperial_eunuch
				}				
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }	
					ai = no
					ROOT = {
						NOT = { religion_group = muslim }
					}
					NOT = {
						reverse_opinion = {
							who = ROOT
							value = -25
						}
					}
					NOT = {	
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_court_jester
							}
						}
					}	
				}
				give_minor_title = title_court_jester
				set_global_flag = minor_title_given
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }	
					ai = no
					ROOT = {
						religion_group = muslim
					}
					NOT = {
						reverse_opinion = {
							who = ROOT
							value = -25
						}
					}
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_food_taster
							}
						}
					}	
				}
				give_minor_title = title_food_taster
				set_global_flag = minor_title_given
			}			
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }	
					trait = dwarf
					ROOT = {
						higher_tier_than = duke
					}
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_court_dwarf
							}
						}
					}	
				}
				give_minor_title = title_court_dwarf
				set_global_flag = minor_title_given
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }	
					is_female = no
					opinion = {
						who = ROOT
						value = 25
					}
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_cupbearer
							}
						}
					}	
				}
				give_minor_title = title_cupbearer
				set_global_flag = minor_title_given
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }	
					is_female = no
					ROOT = {
						higher_tier_than = duke
						religion_group = muslim
					}
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_court_calligrapher
							}
						}
					}	
				}
				give_minor_title = title_court_calligrapher
				set_global_flag = minor_title_given
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }
					is_female = no
					ROOT = {
						religion_group = muslim
					}					
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_court_musician
							}
						}
					}	
				}
				give_minor_title = title_court_musician
				set_global_flag = minor_title_given
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }	
					is_female = no
					ROOT = {
						religion_group = muslim
					}					
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_court_poet
							}
						}
					}	
				}
				give_minor_title = title_court_poet
				set_global_flag = minor_title_given
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }
					is_female = no
					ROOT = {
						religion_group = muslim
					}					
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_chief_architect
							}
						}
					}		
				}
				give_minor_title = title_chief_architect
				set_global_flag = minor_title_given
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }	
					ROOT = {
						higher_tier_than = duke
						NOT = { religion_group = muslim }
						NOT = { has_landed_title = e_byzantium }
						NOT = { has_landed_title = e_roman_empire }
					}						
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_seneschal
							}
						}
					}	
				}
				give_minor_title = title_seneschal
				set_global_flag = minor_title_given
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }
					ROOT = {
						higher_tier_than = duke
						NOT = { religion_group = muslim }
						NOT = { has_landed_title = e_byzantium }
						NOT = { has_landed_title = e_roman_empire }
					}					
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_keeper_of_swans
							}
						}
					}	
				}
				give_minor_title = title_keeper_of_swans
				set_global_flag = minor_title_given
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }
					ROOT = {
						NOT = { religion_group = muslim }
						NOT = { has_landed_title = e_byzantium }
						NOT = { has_landed_title = e_roman_empire }
					}					
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_master_of_the_horse
							}
						}
					}	
				}
				give_minor_title = title_master_of_the_horse
				set_global_flag = minor_title_given
			}			
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }
					ROOT = {
						NOT = { religion_group = muslim }
						NOT = { has_landed_title = e_byzantium }
						NOT = { has_landed_title = e_roman_empire }
					}					
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_master_of_the_hunt
							}
						}
					}	
				}
				give_minor_title = title_master_of_the_hunt
				set_global_flag = minor_title_given
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }
					ROOT = {
						NOT = { religion_group = muslim }
						NOT = { has_landed_title = e_byzantium }
						NOT = { has_landed_title = e_roman_empire }
					}					
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_high_almoner
							}
						}
					}	
				}
				give_minor_title = title_high_almoner
				set_global_flag = minor_title_given
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }
					is_female = no
					trait = eunuch
					ROOT = {
						NOT = { religion_group = muslim }
						OR = {
							has_landed_title = e_byzantium
							has_landed_title = e_roman_empire
						}
					}					
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_imperial_eunuch
							}
						}
					}	
				}
				give_minor_title = title_imperial_eunuch
				set_global_flag = minor_title_given
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }	
					is_close_relative = ROOT
					ROOT = {
						NOT = { religion_group = muslim }
						OR = {
							has_landed_title = e_byzantium
							has_landed_title = e_roman_empire
						}
					}					
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_sebastokrator
							}
						}
					}	
				}
				give_minor_title = title_sebastokrator
				set_global_flag = minor_title_given
			}
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }	
					ROOT = {
						NOT = { religion_group = muslim }
						OR = {
							has_landed_title = e_byzantium
							has_landed_title = e_roman_empire
						}
					}					
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_caesar
							}
						}
					}	
				}
				give_minor_title = title_caesar
				set_global_flag = minor_title_given
			}	
			
			if = {
				limit = {
					NOT = { has_global_flag = minor_title_given }
					ROOT = {
						NOT = { religion_group = muslim }
						OR = {
							has_landed_title = e_byzantium
							has_landed_title = e_roman_empire
						}
					}					
					NOT = {
						ROOT = {
							any_realm_character = {
								liege = { character = ROOT }
								has_minor_title = title_anthypatos
							}
						}
					}	
				}
				give_minor_title = title_anthypatos
				set_global_flag = minor_title_given
			}			
		}		
		clr_global_flag = minor_title_given
	}
}

#AI employs debutante
character_event = {
	id = 110058
	is_triggered_only = yes
	trigger = {
		ai = yes
		NOT = { has_character_flag = employed_debutante }
		has_ambition = obj_find_lover
		is_female = no
		is_ruler = yes
		age = 16			
		NOT = { religion_group = muslim }
		demesne_size = 1
		treasury = 5
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1	
	}

	option = {
		name = "OK"
		treasury = -5
		create_character = {
			random_traits = yes
			dynasty = random
			female = yes
			age = 16
		}
		new_character = {
			set_character_flag = debutante
		}
		set_character_flag = employed_debutante
	}
}

#Remove just
character_event = {
	id = 110059
	is_triggered_only = yes
	
	trigger = {
		trait = just
	}
	
	immediate = {
		remove_trait = just
	}
		
	desc = "EVTDESC110059"

	option = {
		name = "EVTOPTA110059"		
		tooltip = { remove_trait = just }
	}
}	

character_event = {
	id = 110063
	
	trigger = {
		trait = loyalist
		war = no
		OR = {
			independent = yes
			liege = { character = ROOT }
			liege = { war = no }
		}
	}
	
	mean_time_to_happen = {
		months = 1
	}
		
	desc = "EVTDESC110063"
	
	option = {
		name = "EVTOPTA110063"
		remove_trait = loyalist
	}	
}

character_event = {
	id = 110064
	
	trigger = {
		trait = rebel
		war = no
		OR = {
			independent = yes
			liege = { character = ROOT }
			liege = { war = no }
		}
	}
	
	mean_time_to_happen = {
		months = 1
	}
		
	desc = "EVTDESC110064"
	
	option = {
		name = "EVTOPTA110064"
		remove_trait = rebel
		if = {
			limit = {
				any_playable_ruler = {
					NOT = { is_liege_of = ROOT }
					reverse_has_opinion_modifier = {
						who = ROOT
						modifier = revolting_against
					}
					higher_tier_than = ROOT
				}
			}
			random_playable_ruler = {
				limit = {
					NOT = { is_liege_of = ROOT }
					reverse_has_opinion_modifier = {
						who = ROOT
						modifier = revolting_against
					}
					higher_tier_than = ROOT
				}
				hidden_tooltip = {
					reverse_remove_opinion = {
						who = ROOT
						modifier = revolting_against
					}
				}
				ROOT = { set_defacto_liege = PREV }
			}					
		}
	}	
}

character_event = {
	id = 110066
	is_triggered_only = yes
	only_rulers = yes
	
	trigger = {
		ai = yes
		liege = {	
			NOT = { dynasty = ROOT }
			NOT = { is_close_relative = ROOT }
			NOT = {
				reverse_has_opinion_modifier = {
					modifier = opinion_in_law
					who = ROOT
				}
			}
			OR = {
				any_sibling = { spouse = { character = ROOT } }
				any_child = { spouse = { character = ROOT } }
				father = { spouse = { character = ROOT } }
				mother = { spouse = { character = ROOT } }
				ROOT = { any_sibling = { spouse = { character = PREVPREVPREV } } }
				ROOT = { any_child = { spouse = { character = PREVPREVPREV } } }
				ROOT = { father = { spouse = { character = PREVPREVPREV } } }
				ROOT = { mother = { spouse = { character = PREVPREVPREV } } }
			}
		}
	}
	
	mean_time_to_happen = { days = 1 }	
		
	desc = "AI_EVENT"
	
	option = {
		name = "OK"
		reverse_opinion = {
			modifier = opinion_in_law
			who = liege
			months = 1200
		}		
		opinion = {
			modifier = opinion_in_law
			who = liege
			months = 1200
		}
	}	
}

character_event = {
	id = 110067
	is_triggered_only = yes
	only_rulers = yes
	
	trigger = {
		ai = yes
		liege = {
			reverse_has_opinion_modifier = {
				modifier = opinion_in_law
				who = ROOT
			}
			OR = {
				dynasty = ROOT
				is_close_relative = ROOT			
				NOT = {
					any_sibling = { spouse = { character = ROOT } }
					any_child = { spouse = { character = ROOT } }
					father = { spouse = { character = ROOT } }
					mother = { spouse = { character = ROOT } }
					ROOT = { any_sibling = { spouse = { character = PREVPREVPREV } } }
					ROOT = { any_child = { spouse = { character = PREVPREVPREV } } }
					ROOT = { father = { spouse = { character = PREVPREVPREV } } }
					ROOT = { mother = { spouse = { character = PREVPREVPREV } } }
				}
			}
		}
	}
	
	mean_time_to_happen = { days = 1 }	
		
	desc = "AI_EVENT"
	
	option = {
		name = "OK"
		remove_opinion = {
			modifier = opinion_in_law
			who = liege
		}
	}	
}

character_event = {
	id = 110068
	
	trigger = {
		war = no
		is_ruler = yes
		tier = emperor
		has_landed_title = e_latin_empire
		e_byzantium = { has_holder = no }
		OR = {
			religion = orthodox
			is_heresy_of = orthodox
		}
	}
		
	desc = "EVTDESC110068"

	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "EVTOPTA110068"
		set_character_flag = centralize_without_penalties
		e_byzantium = {
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = investiture_law_0 }
					}
				}
				add_law = investiture_law_0
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = investiture_law_1 }
					}
				}
				add_law = investiture_law_1
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = succ_gavelkind }
					}
				}
				ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
				add_law = succ_gavelkind
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = succ_seniority }
					}
				}
				ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
				add_law = succ_seniority
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = succ_primogeniture }
					}
				}
				ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
				add_law = succ_primogeniture
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = succ_feudal_elective }
					}
				}
				ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
				add_law = succ_feudal_elective
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = succ_turkish_succession }
					}
				}
				ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
				add_law = succ_turkish_succession
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = succ_open_elective }
					}
				}
				ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
				add_law = succ_open_elective
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = succ_catholic_bishopric }
					}
				}
				ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
				add_law = succ_catholic_bishopric
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = cognatic_succession }
					}
				}
				ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
				add_law = cognatic_succession
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = agnatic_succession }
					}
				}
				ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
				add_law = agnatic_succession
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = true_cognatic_succession }
					}
				}
				ROOT = { set_character_flag = no_prestige_loss_on_succ_law }
				add_law = true_cognatic_succession
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = feudal_tax_0 }
					}
				}
				add_law = feudal_tax_0
			}	
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = feudal_tax_1 }
					}
				}
				add_law = feudal_tax_1
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = feudal_tax_2 }
					}
				}
				add_law = feudal_tax_2
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = feudal_tax_3 }
					}
				}
				add_law = feudal_tax_3
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = feudal_tax_4 }
					}
				}
				add_law = feudal_tax_4
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = feudal_contract_0 }
					}
				}
				add_law = feudal_contract_0
			}	
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = feudal_contract_1 }
					}
				}
				add_law = feudal_contract_1
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = feudal_contract_2 }
					}
				}
				add_law = feudal_contract_2
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = feudal_contract_3 }
					}
				}
				add_law = feudal_contract_3
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = feudal_contract_4 }
					}
				}
				add_law = feudal_contract_4
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = iqta_tax_0 }
					}
				}
				add_law = iqta_tax_0
			}	
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = iqta_tax_1 }
					}
				}
				add_law = iqta_tax_1
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = iqta_tax_2 }
					}
				}
				add_law = iqta_tax_2
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = iqta_tax_3 }
					}
				}
				add_law = iqta_tax_3
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = iqta_tax_4 }
					}
				}
				add_law = iqta_tax_4
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = iqta_contract_0 }
					}
				}
				add_law = iqta_contract_0
			}	
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = iqta_contract_1 }
					}
				}
				add_law = iqta_contract_1
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = iqta_contract_2 }
					}
				}
				add_law = iqta_contract_2
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = iqta_contract_3 }
					}
				}
				add_law = iqta_contract_3
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = iqta_contract_4 }
					}
				}
				add_law = iqta_contract_4
			}							
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = city_tax_0 }
					}
				}
				add_law = city_tax_0
			}	
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = city_tax_1 }
					}
				}
				add_law = city_tax_1
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = city_tax_2 }
					}
				}
				add_law = city_tax_2
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = city_tax_3 }
					}
				}
				add_law = city_tax_3
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = city_tax_4 }
					}
				}
				add_law = city_tax_4
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = city_contract_0 }
					}
				}
				add_law = city_contract_0
			}	
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = city_contract_1 }
					}
				}
				add_law = city_contract_1
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = city_contract_2 }
					}
				}
				add_law = city_contract_2
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = city_contract_3 }
					}
				}
				add_law = city_contract_3
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = city_contract_4 }
					}
				}
				add_law = city_contract_4
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = temple_tax_0 }
					}
				}
				add_law = temple_tax_0
			}	
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = temple_tax_1 }
					}
				}
				add_law = temple_tax_1
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = temple_tax_2 }
					}
				}
				add_law = temple_tax_2
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = temple_tax_3 }
					}
				}
				add_law = temple_tax_3
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = temple_tax_4 }
					}
				}
				add_law = temple_tax_4
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = temple_contract_0 }
					}
				}
				add_law = temple_contract_0
			}	
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = temple_contract_1 }
					}
				}
				add_law = temple_contract_1
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = temple_contract_2 }
					}
				}
				add_law = temple_contract_2
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = temple_contract_3 }
					}
				}
				add_law = temple_contract_3
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = temple_contract_4 }
					}
				}
				add_law = temple_contract_4
			}					
			if = {
				limit = {
					ROOT = { 
						primary_title = {
							NOT = {
								has_law = centralization_0
								has_law = centralization_1
								has_law = centralization_2
								has_law = centralization_3
								has_law = centralization_4
							}
						}
					}
				}
				add_law = centralization_1
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = centralization_0 }
					}
				}
				add_law = centralization_0
			}	
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = centralization_1 }
					}
				}
				add_law = centralization_1
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = centralization_2 }
					}
				}
				add_law = centralization_2
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = centralization_3 }
					}
				}
				add_law = centralization_3
			}
			if = {
				limit = {
					ROOT = { 
						primary_title = { has_law = centralization_4 }
					}
				}
				add_law = centralization_4
			}							
			gain_title = ROOT						
		}		
		e_latin_empire = {
			destroy_landed_title = yes
		}
		clr_character_flag = centralize_without_penalties
		clr_character_flag = no_prestige_loss_on_succ_law
	}
}

character_event = {
	id = 110069
	
	trigger = {
		war = no
		is_ruler = yes
		tier = emperor
		has_landed_title = e_latin_empire
		e_byzantium = { has_holder = yes }
		OR = {
			religion = orthodox
			is_heresy_of = orthodox
		}
	}
		
	desc = "EVTDESC110069"

	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"		
		e_latin_empire = {
			destroy_landed_title = yes
		}
	}
}

#contingent territory flags
character_event = {
	id = 110070
	
	is_triggered_only = yes
		
	desc = "AI_EVENT"
	
	option = {
		name = "OK"	
		any_playable_ruler = {
			any_demesne_title = {
				limit = { tier = count }
				location = { clr_province_flag = contingent_territory }
			}
		}
		capital_scope = { set_province_flag = contingent_territory }
		any_independent_ruler = {
			capital_scope = { set_province_flag = contingent_territory }
		}		
		character_event = { id = 110071 }
	}
}

character_event = {
	id = 110071
	
	is_triggered_only = yes
	
	trigger = {
		any_playable_ruler = {
			any_demesne_province = {
				NOT = { has_province_flag = contingent_territory }
				any_neighbor_province = {
					owner = { OR = { character = PREVPREVPREV same_realm = PREVPREVPREV } }
					has_province_flag = contingent_territory
				}
			}
		}	
	}
		
	desc = "AI_EVENT"
	
	option = {
		name = "OK"	
		any_playable_ruler = {
			random_demesne_province = {
				limit = {
					NOT = { has_province_flag = contingent_territory }
					any_neighbor_province = {
						owner = { OR = { character = PREVPREVPREV same_realm = PREVPREVPREV } }
						has_province_flag = contingent_territory
					}
				}
				set_province_flag = contingent_territory
			}
		}	
		character_event = { id = 110071 }
	}
}



